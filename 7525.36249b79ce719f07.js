"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7525],{7525:(Lc,Fe,R)=>{R.r(Fe),R.d(Fe,{HomePageModule:()=>Ss});var z=R(9808),b=R(5056),E=R(4182),ve=R(4918),pe=R(655),s=R(9863),Ct=R(7224),Mt=R(5529);let At=(()=>{class i{constructor(){this.loaded=!1,this.loadingFinished=new Mt.xQ}finishLoading(){this.loaded=!0,this.loadingFinished.next()}load(){const t="./assets/monaco-editor/min/vs";if("object"==typeof window.monaco)return void this.finishLoading();const o=()=>{window.require.config({paths:{vs:`${t}`}}),window.require(["vs/editor/editor.main"],()=>{this.finishLoading()})};if(window.require)o();else{const r=document.createElement("script");r.type="text/javascript",r.src=`${t}/loader.js`,r.addEventListener("load",o),document.body.appendChild(r)}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var se=R(591);let ce=(()=>{class i{constructor(){this.bu$=new se.X({}),this.from=0,this.to=255,this.init()}init(){this.ram=new Uint8Array(131071),this.load()}From(t){t>65535||t>=this.to||(this.from=t)}To(t){t>65535||t<=this.from||(this.to=t)}FromTo(t,o){o>65535||o<=t||(this.to=o,this.from=t)}getBus(){return this.bu$.asObservable()}load(){const t={};for(let o=this.from;o<=this.to;++o){const r=o.toString(16);t[r]||(t[r]=[]);for(let p=0;p<=15;++p)t[r].push(this.read(o+p).toString(16));o+=15}this.bu$.next(t)}clear(){this.ram.fill(0),this.load()}read(t){if(t>=0&&t<=65535)return 255&this.ram[t];throw new Error("Error: Address is out of  Bound")}write(t,o){if(!(t>=0&&t<=65535))throw new Error("Error: Address is out of  Bound");this.ram[t]=255&o}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class W{constructor(){this.error=new se.X(null)}static getInstance(){return this.instance||(this.instance=new W),this.instance}}class M{constructor(e,t=[],o={}){this._type=e,this._children=t,this._data=o,this._line=null}static assignment(e,t){return new M("assignment",[e,t])}static command(e,t){return new M("command",t?t.children:[],{name:e})}static expressionList(e){return new M("expressionList",e)}static identifier(e){return new M("identifier",[],{value:e})}static immediate(e){const{value:t}=e.data;return new M("immediate",[],{value:t})}static instruction(e,t,o){return new M("instruction",o?[o]:[],{name:e,mode:t})}static label(e){return new M("label",[],{name:e.data.value})}static localLabel(e){return new M("localLabel",[],{name:e.data.value})}static number(e,t){const o=parseInt(t,e);return new M("number",[],{value:o})}static statementList(e){return new M("statementList",e)}static stringLiteral(e){return new M("stringLiteral",[],{value:e})}get children(){return this._children}get data(){return this._data}get line(){return this._line}set line(e){this._line=e}get type(){return this._type}isAssignment(){return"assignment"===this.type}isCommand(){return"command"===this.type}isExpressionList(){return"expressionList"===this.type}isIdentifier(){return"identifier"===this.type}isImmediate(){return"immediate"===this.type}isInstruction(){return"instruction"===this.type}isLabel(){return"label"===this.type}isLocalLabel(){return"localLabel"===this.type}isNumber(){return"number"===this.type}isStringLiteral(){return"stringLiteral"===this.type}}function V(i,e,t,o){throw this.message=i,this.expected=e,this.found=t,this.location=o,this.name="SyntaxError",Error(i)}(function _t(i,e){function t(){this.constructor=i}t.prototype=e.prototype,i.prototype=new t})(V,Error),V.buildMessage=function(i,e){var t={literal:function(y){return'"'+r(y.text)+'"'},class:function(y){var _,A="";for(_=0;_<y.parts.length;_++)A+=y.parts[_]instanceof Array?p(y.parts[_][0])+"-"+p(y.parts[_][1]):p(y.parts[_]);return"["+(y.inverted?"^":"")+A+"]"},any:function(y){return"any character"},end:function(y){return"end of input"},other:function(y){return y.description}};function o(y){return y.charCodeAt(0).toString(16).toUpperCase()}function r(y){return y.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(A){return"\\x0"+o(A)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(A){return"\\x"+o(A)})}function p(y){return y.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(A){return"\\x0"+o(A)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(A){return"\\x"+o(A)})}function u(y){return t[y.type](y)}return"Expected "+function I(y){var _,$,A=new Array(y.length);for(_=0;_<y.length;_++)A[_]=u(y[_]);if(A.sort(),A.length>0){for(_=1,$=1;_<A.length;_++)A[_-1]!==A[_]&&(A[$]=A[_],$++);A.length=$}switch(A.length){case 1:return A[0];case 2:return A[0]+" or "+A[1];default:return A.slice(0,-1).join(", ")+", or "+A[A.length-1]}}(i)+" but "+function X(y){return y?'"'+r(y)+'"':"end of input"}(e)+" found."};const Ft_parse=function It(i,e){e=void 0!==e?e:{};var le,t={},o={start:gt},r=gt,u=/^[ \t\r\n]/,I=L([" ","\t","\r","\n"],!1,!1),A=Z("=",!1),Ee=Z(".",!1),Q=",",j=Z(",",!1),Ne=Z("@",!1),Ye=Z(":",!1),ws=/^[Aa]/,Os=L(["A","a"],!1,!1),qe=/^[xX]/,ze=L(["x","X"],!1,!1),Ue=/^[yY]/,Je=L(["y","Y"],!1,!1),Ns=Z("*",!1),ie=/^[+\-]/,oe=L(["+","-"],!1,!1),ae=/^[0-9]/,ne=L([["0","9"]],!1,!1),be=Z("(",!1),Me=Z(")",!1),Ae=/^[a-zA-Z]/,_e=L([["a","z"],["A","Z"]],!1,!1),Gs=/^[a-zA-Z_]/,Qs=L([["a","z"],["A","Z"],"_"],!1,!1),Ve=/^[a-zA-Z0-9_]/,Ge=L([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),Ks=Z("#",!1),tc=Z("%",!1),Qe=/^[01]/,je=L(["0","1"],!1,!1),oc=Z("$",!1),He=/^[0-9a-fA-F]/,Ke=L([["0","9"],["a","f"],["A","F"]],!1,!1),et=Z('"',!1),tt=/^[^"]/,st=L(['"'],!0,!1),rc=Z("\\a",!1),dc=Z("\\b",!1),pc=Z("\\e",!1),fc=Z("\\f",!1),xc=Z("\\n",!1),yc=Z("\\r",!1),Cc=Z("\\t",!1),Ac=Z("\\v",!1),Ic=Z("\\\\",!1),vc=Z('\\"',!1),a=0,re=[{line:1,column:1}],N=0,Ie=[];if("startRule"in e){if(!(e.startRule in o))throw new Error("Can't start parsing from rule \""+e.startRule+'".');r=o[e.startRule]}function Z(c,n){return{type:"literal",text:c,ignoreCase:n}}function L(c,n,d){return{type:"class",parts:c,inverted:n,ignoreCase:d}}function ut(c){var d,n=re[c];if(n)return n;for(d=c-1;!re[d];)d--;for(n={line:(n=re[d]).line,column:n.column};d<c;)10===i.charCodeAt(d)?(n.line++,n.column=1):n.column++,d++;return re[c]=n,n}function g(c){a<N||(a>N&&(N=a,Ie=[]),Ie.push(c))}function gt(){var c,d;return c=a,v()!==t?(d=function Tc(){var c,n,h;return(c=function $c(){var c,n,h,F;return c=a,(n=J())!==t&&v()!==t?(61===i.charCodeAt(a)?(h="=",a++):(h=t,g(A)),h!==t&&v()!==t&&(F=Y())!==t?(n=function(c,n){return M.assignment(c,n)}(n,F),c=n):(a=c,c=t)):(a=c,c=t),c}())===t&&(c=function wc(){var c,n,d,m;return c=a,46===i.charCodeAt(a)?(n=".",a++):(n=t,g(Ee)),n!==t&&(d=J())!==t&&v()!==t&&(m=function Oc(){var c,n,d,h,m,F,S,P;if(c=a,(n=Y())!==t){for(d=[],h=a,(m=v())!==t?(44===i.charCodeAt(a)?(F=Q,a++):(F=t,g(j)),F!==t&&(S=v())!==t&&(P=Y())!==t?h=m=[m,F,S,P]:(a=h,h=t)):(a=h,h=t);h!==t;)d.push(h),h=a,(m=v())!==t?(44===i.charCodeAt(a)?(F=Q,a++):(F=t,g(j)),F!==t&&(S=v())!==t&&(P=Y())!==t?h=m=[m,F,S,P]:(a=h,h=t)):(a=h,h=t);d!==t?(n=function(c,n){return M.expressionList([c].concat(n.map(d=>d[3])))}(n,d),c=n):(a=c,c=t)}else a=c,c=t;return c}())!==t?(n=function(c,n){return M.command(c.data.value,n)}(d,m),c=n):(a=c,c=t),c===t&&(c=a,46===i.charCodeAt(a)?(n=".",a++):(n=t,g(Ee)),n!==t&&(d=J())!==t?(n=function(c){return M.command(c.data.value)}(d),c=n):(a=c,c=t)),c}())===t&&(c=a,(n=xt())!==t&&v()!==t&&(h=mt())!==t?(n=function(c,n){return[c,n]}(n,h),c=n):(a=c,c=t),c===t&&(c=xt())===t&&(c=mt())),c}(),d!==t&&v()!==t?c=d:(a=c,c=t)):(a=c,c=t),c}function v(){var c,n;for(c=[],u.test(i.charAt(a))?(n=i.charAt(a),a++):(n=t,g(I));n!==t;)c.push(n),u.test(i.charAt(a))?(n=i.charAt(a),a++):(n=t,g(I));return c}function q(){var c,n;if(c=[],u.test(i.charAt(a))?(n=i.charAt(a),a++):(n=t,g(I)),n!==t)for(;n!==t;)c.push(n),u.test(i.charAt(a))?(n=i.charAt(a),a++):(n=t,g(I));else c=t;return c}function xt(){var c,n,d,h;return c=a,64===i.charCodeAt(a)?(n="@",a++):(n=t,g(Ne)),n!==t&&(d=J())!==t?(58===i.charCodeAt(a)?(h=":",a++):(h=t,g(Ye)),h!==t?(n=function(c){return M.localLabel(c)}(d),c=n):(a=c,c=t)):(a=c,c=t),c===t&&(c=a,(n=J())!==t?(58===i.charCodeAt(a)?(d=":",a++):(d=t,g(Ye)),d!==t?(n=function(c){return M.label(c)}(n),c=n):(a=c,c=t)):(a=c,c=t)),c}function mt(){var c,n,h,m,F,S,P,H,K;if(c=a,(n=k())!==t&&q()!==t?(ws.test(i.charAt(a))?(h=i.charAt(a),a++):(h=t,g(Os)),h!==t?(n=function(c){return M.instruction(c,"accumulator")}(n),c=n):(a=c,c=t)):(a=c,c=t),c===t&&(c=a,(n=k())!==t&&q()!==t&&(h=Y())!==t&&(m=v())!==t?(44===i.charCodeAt(a)?(F=Q,a++):(F=t,g(j)),F!==t&&(S=v())!==t?(qe.test(i.charAt(a))?(P=i.charAt(a),a++):(P=t,g(ze)),P!==t?(n=function(c,n){return M.instruction(c,"xIndex",n)}(n,h),c=n):(a=c,c=t)):(a=c,c=t)):(a=c,c=t),c===t&&(c=a,(n=k())!==t&&q()!==t&&(h=Y())!==t&&(m=v())!==t?(44===i.charCodeAt(a)?(F=Q,a++):(F=t,g(j)),F!==t&&(S=v())!==t?(Ue.test(i.charAt(a))?(P=i.charAt(a),a++):(P=t,g(Je)),P!==t?(n=function(c,n){return M.instruction(c,"yIndex",n)}(n,h),c=n):(a=c,c=t)):(a=c,c=t)):(a=c,c=t),c===t&&(c=a,(n=k())!==t&&q()!==t?(64===i.charCodeAt(a)?(h="@",a++):(h=t,g(Ne)),h!==t&&(m=J())!==t?(n=function(c,n){return M.instruction(c,"localLabel",n)}(n,m),c=n):(a=c,c=t)):(a=c,c=t),c===t)))){if(c=a,(n=k())!==t)if(q()!==t)if(42===i.charCodeAt(a)?(h="*",a++):(h=t,g(Ns)),h!==t)if(ie.test(i.charAt(a))?(m=i.charAt(a),a++):(m=t,g(oe)),m!==t){if(F=[],ae.test(i.charAt(a))?(S=i.charAt(a),a++):(S=t,g(ne)),S!==t)for(;S!==t;)F.push(S),ae.test(i.charAt(a))?(S=i.charAt(a),a++):(S=t,g(ne));else F=t;F!==t?(n=function(c,n,d){const h=M.number(10,[n].concat(d).join(""));return M.instruction(c,"relative",h)}(n,m,F),c=n):(a=c,c=t)}else a=c,c=t;else a=c,c=t;else a=c,c=t;else a=c,c=t;c===t&&(c=a,(n=k())!==t&&q()!==t&&(h=Y())!==t?(n=function(c,n){return M.instruction(c,"expression",n)}(n,h),c=n):(a=c,c=t),c===t&&(c=a,(n=k())!==t&&q()!==t?(40===i.charCodeAt(a)?(h="(",a++):(h=t,g(be)),h!==t&&(m=v())!==t&&(F=Y())!==t&&(S=v())!==t?(44===i.charCodeAt(a)?(P=Q,a++):(P=t,g(j)),P!==t&&v()!==t?(qe.test(i.charAt(a))?(H=i.charAt(a),a++):(H=t,g(ze)),H!==t&&v()!==t?(41===i.charCodeAt(a)?(K=")",a++):(K=t,g(Me)),K!==t?(n=function(c,n){return M.instruction(c,"indirectX",n)}(n,F),c=n):(a=c,c=t)):(a=c,c=t)):(a=c,c=t)):(a=c,c=t)):(a=c,c=t),c===t&&(c=a,(n=k())!==t&&q()!==t?(40===i.charCodeAt(a)?(h="(",a++):(h=t,g(be)),h!==t&&(m=v())!==t&&(F=Y())!==t&&(S=v())!==t?(41===i.charCodeAt(a)?(P=")",a++):(P=t,g(Me)),P!==t&&v()!==t?(44===i.charCodeAt(a)?(H=Q,a++):(H=t,g(j)),H!==t&&v()!==t?(Ue.test(i.charAt(a))?(K=i.charAt(a),a++):(K=t,g(Je)),K!==t?(n=function(c,n){return M.instruction(c,"indirectY",n)}(n,F),c=n):(a=c,c=t)):(a=c,c=t)):(a=c,c=t)):(a=c,c=t)):(a=c,c=t),c===t&&(c=a,(n=k())!==t&&q()!==t?(40===i.charCodeAt(a)?(h="(",a++):(h=t,g(be)),h!==t&&(m=v())!==t&&(F=Y())!==t&&(S=v())!==t?(41===i.charCodeAt(a)?(P=")",a++):(P=t,g(Me)),P!==t?(n=function(c,n){return M.instruction(c,"indirect",n)}(n,F),c=n):(a=c,c=t)):(a=c,c=t)):(a=c,c=t),c===t&&(c=a,(n=k())!==t&&(n=function(c){return M.instruction(c,"implicit")}(n)),c=n)))))}return c}function k(){var n,d,h,m;return a,n=a,Ae.test(i.charAt(a))?(d=i.charAt(a),a++):(d=t,g(_e)),d!==t?(Ae.test(i.charAt(a))?(h=i.charAt(a),a++):(h=t,g(_e)),h!==t?(Ae.test(i.charAt(a))?(m=i.charAt(a),a++):(m=t,g(_e)),m!==t?n=d=[d,h,m]:(a=n,n=t)):(a=n,n=t)):(a=n,n=t),n!==t&&(n=function(c){return c.join("").toLowerCase()}(n)),n}function Y(){var c;return(c=J())===t&&(c=function Rc(){var c,n,d;return c=a,35===i.charCodeAt(a)?(n="#",a++):(n=t,g(Ks)),n!==t&&(d=yt())!==t?(n=function(c){return M.immediate(c)}(d),c=n):(a=c,c=t),c}())===t&&(c=yt())===t&&(c=function Bc(){var c,n,d,h;if(c=a,34===i.charCodeAt(a)?(n='"',a++):(n=t,g(et)),n!==t){if(d=[],(h=bt())===t&&(tt.test(i.charAt(a))?(h=i.charAt(a),a++):(h=t,g(st))),h!==t)for(;h!==t;)d.push(h),(h=bt())===t&&(tt.test(i.charAt(a))?(h=i.charAt(a),a++):(h=t,g(st)));else d=t;d!==t?(34===i.charCodeAt(a)?(h='"',a++):(h=t,g(et)),h!==t?(n=function(c){return M.stringLiteral(c.join(""))}(d),c=n):(a=c,c=t)):(a=c,c=t)}else a=c,c=t;return c}()),c}function J(){var n,d,h,m;if(a,n=a,Gs.test(i.charAt(a))?(d=i.charAt(a),a++):(d=t,g(Qs)),d!==t){for(h=[],Ve.test(i.charAt(a))?(m=i.charAt(a),a++):(m=t,g(Ge));m!==t;)h.push(m),Ve.test(i.charAt(a))?(m=i.charAt(a),a++):(m=t,g(Ge));h!==t?n=d=[d,h]:(a=n,n=t)}else a=n,n=t;return n!==t&&(n=function(c){const d=(c.length>1?[c[0]].concat(c[1]):c).join("");return M.identifier(d)}(n)),n}function yt(){var c,n,d,h,m;if(c=a,37===i.charCodeAt(a)?(n="%",a++):(n=t,g(tc)),n!==t)if(ie.test(i.charAt(a))?(d=i.charAt(a),a++):(d=t,g(oe)),d===t&&(d=null),d!==t){if(h=[],Qe.test(i.charAt(a))?(m=i.charAt(a),a++):(m=t,g(je)),m!==t)for(;m!==t;)h.push(m),Qe.test(i.charAt(a))?(m=i.charAt(a),a++):(m=t,g(je));else h=t;h!==t?(n=function(c,n){const d=[c||"+"].concat(n).join("");return M.number(2,d)}(d,h),c=n):(a=c,c=t)}else a=c,c=t;else a=c,c=t;if(c===t){if(c=a,ie.test(i.charAt(a))?(n=i.charAt(a),a++):(n=t,g(oe)),n===t&&(n=null),n!==t){if(d=[],ae.test(i.charAt(a))?(h=i.charAt(a),a++):(h=t,g(ne)),h!==t)for(;h!==t;)d.push(h),ae.test(i.charAt(a))?(h=i.charAt(a),a++):(h=t,g(ne));else d=t;d!==t?(n=function(c,n){const d=[c||"+"].concat(n).join("");return M.number(10,d)}(n,d),c=n):(a=c,c=t)}else a=c,c=t;if(c===t)if(c=a,36===i.charCodeAt(a)?(n="$",a++):(n=t,g(oc)),n!==t)if(ie.test(i.charAt(a))?(d=i.charAt(a),a++):(d=t,g(oe)),d===t&&(d=null),d!==t){if(h=[],He.test(i.charAt(a))?(m=i.charAt(a),a++):(m=t,g(Ke)),m!==t)for(;m!==t;)h.push(m),He.test(i.charAt(a))?(m=i.charAt(a),a++):(m=t,g(Ke));else h=t;h!==t?(n=function(c,n){const d=[c||"+"].concat(n).join("");return M.number(16,d)}(d,h),c=n):(a=c,c=t)}else a=c,c=t;else a=c,c=t}return c}function bt(){var c,n;return c=a,"\\a"===i.substr(a,2)?(n="\\a",a+=2):(n=t,g(rc)),n!==t&&(n="a"),(c=n)===t&&(c=a,"\\b"===i.substr(a,2)?(n="\\b",a+=2):(n=t,g(dc)),n!==t&&(n="\b"),(c=n)===t&&(c=a,"\\e"===i.substr(a,2)?(n="\\e",a+=2):(n=t,g(pc)),n!==t&&(n="e"),(c=n)===t&&(c=a,"\\f"===i.substr(a,2)?(n="\\f",a+=2):(n=t,g(fc)),n!==t&&(n="\f"),(c=n)===t&&(c=a,"\\n"===i.substr(a,2)?(n="\\n",a+=2):(n=t,g(xc)),n!==t&&(n="\n"),(c=n)===t&&(c=a,"\\r"===i.substr(a,2)?(n="\\r",a+=2):(n=t,g(yc)),n!==t&&(n="\r"),(c=n)===t&&(c=a,"\\t"===i.substr(a,2)?(n="\\t",a+=2):(n=t,g(Cc)),n!==t&&(n="\t"),(c=n)===t&&(c=a,"\\v"===i.substr(a,2)?(n="\\v",a+=2):(n=t,g(Ac)),n!==t&&(n="\v"),(c=n)===t&&(c=a,"\\\\"===i.substr(a,2)?(n="\\\\",a+=2):(n=t,g(Ic)),n!==t&&(n="\\"),(c=n)===t&&(c=a,'\\"'===i.substr(a,2)?(n='\\"',a+=2):(n=t,g(vc)),n!==t&&(n='"'),c=n))))))))),c}if((le=r())!==t&&a===i.length)return le;throw le!==t&&a<i.length&&g({type:"end"}),function ft(c,n,d){return new V(V.buildMessage(c,n),c,n,d)}(Ie,N<i.length?i.charAt(N):null,function te(c,n){var d=ut(c),h=ut(n);return{start:{offset:c,line:d.line,column:d.column},end:{offset:n,line:h.line,column:h.column}}}(N,N<i.length?N+1:N))};class vt extends Error{constructor(e,{lineNumber:t,assembly:o}){const r=`Parse Error, line ${t} near "${o}": ${e}`;W.getInstance().error.next(r),super(r)}}class St{constructor(e){this._data=e}get original(){return this._data.original}get lineNumber(){return this._data.lineNumber}get assembly(){return this._data.assembly}}function ue(i,e){e.line=i,e.children.forEach(t=>ue(i,t))}function Se(i){const e=[],o=i.split("\n").map((r,p)=>new St({original:r+"\n",lineNumber:p+1,assembly:r.replace(/^\s+/,"").replace(/;.*/,"").replace(/\s+$/,"")})).filter(r=>r.assembly.length>0);for(const r of o)try{const p=Ft_parse(r.assembly);Array.isArray(p)?p.forEach(u=>{u.line=r,ue(r,u),e.push(u)}):(ue(r,p),e.push(p))}catch(p){throw new vt(p,r)}return M.statementList(e)}const Xt=JSON.parse('{"adc":{"immediate":{"opcode":105,"bytes":2,"cycles":2,"pageCycles":0,"branchCycles":0},"zero_page":{"opcode":101,"bytes":2,"cycles":3,"pageCycles":0,"branchCycles":0},"zero_page_x":{"opcode":117,"bytes":2,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":109,"bytes":3,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute_x":{"opcode":125,"bytes":3,"cycles":4,"pageCycles":1,"branchCycles":0},"absolute_y":{"opcode":121,"bytes":3,"cycles":4,"pageCycles":1,"branchCycles":0},"indirect_x":{"opcode":97,"bytes":2,"cycles":6,"pageCycles":0,"branchCycles":0},"indirect_y":{"opcode":113,"bytes":2,"cycles":5,"pageCycles":1,"branchCycles":0}},"and":{"immediate":{"opcode":41,"bytes":2,"cycles":2,"pageCycles":0,"branchCycles":0},"zero_page":{"opcode":37,"bytes":2,"cycles":3,"pageCycles":0,"branchCycles":0},"zero_page_x":{"opcode":53,"bytes":2,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":45,"bytes":3,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute_x":{"opcode":61,"bytes":3,"cycles":4,"pageCycles":1,"branchCycles":0},"absolute_y":{"opcode":57,"bytes":3,"cycles":4,"pageCycles":1,"branchCycles":0},"indirect_x":{"opcode":33,"bytes":2,"cycles":6,"pageCycles":0,"branchCycles":0},"indirect_y":{"opcode":49,"bytes":2,"cycles":5,"pageCycles":1,"branchCycles":0}},"asl":{"accumulator":{"opcode":10,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0},"implied":{"opcode":10,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0},"zero_page":{"opcode":6,"bytes":2,"cycles":5,"pageCycles":0,"branchCycles":0},"zero_page_x":{"opcode":22,"bytes":2,"cycles":6,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":14,"bytes":3,"cycles":6,"pageCycles":0,"branchCycles":0},"absolute_x":{"opcode":30,"bytes":3,"cycles":7,"pageCycles":0,"branchCycles":0}},"bcc":{"relative":{"opcode":144,"bytes":2,"cycles":2,"pageCycles":2,"branchCycles":1}},"bcs":{"relative":{"opcode":176,"bytes":2,"cycles":2,"pageCycles":2,"branchCycles":1}},"beq":{"relative":{"opcode":240,"bytes":2,"cycles":2,"pageCycles":2,"branchCycles":1}},"bit":{"zero_page":{"opcode":36,"bytes":2,"cycles":3,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":44,"bytes":3,"cycles":4,"pageCycles":0,"branchCycles":0}},"bmi":{"relative":{"opcode":48,"bytes":2,"cycles":2,"pageCycles":2,"branchCycles":1}},"bne":{"relative":{"opcode":208,"bytes":2,"cycles":2,"pageCycles":2,"branchCycles":1}},"bpl":{"relative":{"opcode":16,"bytes":2,"cycles":2,"pageCycles":2,"branchCycles":1}},"brk":{"implied":{"opcode":0,"bytes":1,"cycles":7,"pageCycles":0,"branchCycles":0}},"bvc":{"relative":{"opcode":80,"bytes":2,"cycles":2,"pageCycles":2,"branchCycles":1}},"bvs":{"relative":{"opcode":112,"bytes":2,"cycles":2,"pageCycles":2,"branchCycles":1}},"clc":{"implied":{"opcode":24,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0}},"cld":{"implied":{"opcode":216,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0}},"cli":{"implied":{"opcode":88,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0}},"clv":{"implied":{"opcode":184,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0}},"cmp":{"immediate":{"opcode":201,"bytes":2,"cycles":2,"pageCycles":0,"branchCycles":0},"zero_page":{"opcode":197,"bytes":2,"cycles":3,"pageCycles":0,"branchCycles":0},"zero_page_x":{"opcode":213,"bytes":2,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":205,"bytes":3,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute_x":{"opcode":221,"bytes":3,"cycles":4,"pageCycles":1,"branchCycles":0},"absolute_y":{"opcode":217,"bytes":3,"cycles":4,"pageCycles":1,"branchCycles":0},"indirect_x":{"opcode":193,"bytes":2,"cycles":6,"pageCycles":0,"branchCycles":0},"indirect_y":{"opcode":209,"bytes":2,"cycles":5,"pageCycles":1,"branchCycles":0}},"cpx":{"immediate":{"opcode":224,"bytes":2,"cycles":2,"pageCycles":0,"branchCycles":0},"zero_page":{"opcode":228,"bytes":2,"cycles":3,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":236,"bytes":3,"cycles":4,"pageCycles":0,"branchCycles":0}},"cpy":{"immediate":{"opcode":192,"bytes":2,"cycles":2,"pageCycles":0,"branchCycles":0},"zero_page":{"opcode":196,"bytes":2,"cycles":3,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":204,"bytes":3,"cycles":4,"pageCycles":0,"branchCycles":0}},"dec":{"zero_page":{"opcode":198,"bytes":2,"cycles":5,"pageCycles":0,"branchCycles":0},"zero_page_x":{"opcode":214,"bytes":2,"cycles":6,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":206,"bytes":3,"cycles":6,"pageCycles":0,"branchCycles":0},"absolute_x":{"opcode":222,"bytes":3,"cycles":7,"pageCycles":0,"branchCycles":0}},"dex":{"implied":{"opcode":202,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0}},"dey":{"implied":{"opcode":136,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0}},"eor":{"immediate":{"opcode":73,"bytes":2,"cycles":2,"pageCycles":0,"branchCycles":0},"zero_page":{"opcode":69,"bytes":2,"cycles":3,"pageCycles":0,"branchCycles":0},"zero_page_x":{"opcode":85,"bytes":2,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":77,"bytes":3,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute_x":{"opcode":93,"bytes":3,"cycles":4,"pageCycles":1,"branchCycles":0},"absolute_y":{"opcode":89,"bytes":3,"cycles":4,"pageCycles":1,"branchCycles":0},"indirect_x":{"opcode":65,"bytes":2,"cycles":6,"pageCycles":0,"branchCycles":0},"indirect_y":{"opcode":81,"bytes":2,"cycles":5,"pageCycles":1,"branchCycles":0}},"inc":{"zero_page":{"opcode":230,"bytes":2,"cycles":5,"pageCycles":0,"branchCycles":0},"zero_page_x":{"opcode":246,"bytes":2,"cycles":6,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":238,"bytes":3,"cycles":6,"pageCycles":0,"branchCycles":0},"absolute_x":{"opcode":254,"bytes":3,"cycles":7,"pageCycles":0,"branchCycles":0}},"inx":{"implied":{"opcode":232,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0}},"iny":{"implied":{"opcode":200,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0}},"jmp":{"absolute":{"opcode":76,"bytes":3,"cycles":3,"pageCycles":0,"branchCycles":0},"indirect":{"opcode":108,"bytes":3,"cycles":5,"pageCycles":0,"branchCycles":0}},"jsr":{"absolute":{"opcode":32,"bytes":3,"cycles":6,"pageCycles":0,"branchCycles":0}},"lda":{"immediate":{"opcode":169,"bytes":2,"cycles":2,"pageCycles":0,"branchCycles":0},"zero_page":{"opcode":165,"bytes":2,"cycles":3,"pageCycles":0,"branchCycles":0},"zero_page_x":{"opcode":181,"bytes":2,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":173,"bytes":3,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute_x":{"opcode":189,"bytes":3,"cycles":4,"pageCycles":1,"branchCycles":0},"absolute_y":{"opcode":185,"bytes":3,"cycles":4,"pageCycles":1,"branchCycles":0},"indirect_x":{"opcode":161,"bytes":2,"cycles":6,"pageCycles":0,"branchCycles":0},"indirect_y":{"opcode":177,"bytes":2,"cycles":5,"pageCycles":1,"branchCycles":0}},"ldx":{"immediate":{"opcode":162,"bytes":2,"cycles":2,"pageCycles":0,"branchCycles":0},"zero_page":{"opcode":166,"bytes":2,"cycles":3,"pageCycles":0,"branchCycles":0},"zero_page_y":{"opcode":182,"bytes":2,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":174,"bytes":3,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute_y":{"opcode":190,"bytes":3,"cycles":4,"pageCycles":1,"branchCycles":0}},"ldy":{"immediate":{"opcode":160,"bytes":2,"cycles":2,"pageCycles":0,"branchCycles":0},"zero_page":{"opcode":164,"bytes":2,"cycles":3,"pageCycles":0,"branchCycles":0},"zero_page_x":{"opcode":180,"bytes":2,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":172,"bytes":3,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute_x":{"opcode":188,"bytes":3,"cycles":4,"pageCycles":1,"branchCycles":0}},"lsr":{"accumulator":{"opcode":74,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0},"implied":{"opcode":74,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0},"zero_page":{"opcode":70,"bytes":2,"cycles":5,"pageCycles":0,"branchCycles":0},"zero_page_x":{"opcode":86,"bytes":2,"cycles":6,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":78,"bytes":3,"cycles":6,"pageCycles":0,"branchCycles":0},"absolute_x":{"opcode":94,"bytes":3,"cycles":7,"pageCycles":0,"branchCycles":0}},"nop":{"implied":{"opcode":234,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0}},"ora":{"immediate":{"opcode":9,"bytes":2,"cycles":2,"pageCycles":0,"branchCycles":0},"zero_page":{"opcode":5,"bytes":2,"cycles":3,"pageCycles":0,"branchCycles":0},"zero_page_x":{"opcode":21,"bytes":2,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":13,"bytes":3,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute_x":{"opcode":29,"bytes":3,"cycles":4,"pageCycles":1,"branchCycles":0},"absolute_y":{"opcode":25,"bytes":3,"cycles":4,"pageCycles":1,"branchCycles":0},"indirect_x":{"opcode":1,"bytes":2,"cycles":6,"pageCycles":0,"branchCycles":0},"indirect_y":{"opcode":17,"bytes":2,"cycles":5,"pageCycles":1,"branchCycles":0}},"pha":{"implied":{"opcode":72,"bytes":1,"cycles":3,"pageCycles":0,"branchCycles":0}},"php":{"implied":{"opcode":8,"bytes":1,"cycles":3,"pageCycles":0,"branchCycles":0}},"pla":{"implied":{"opcode":104,"bytes":1,"cycles":4,"pageCycles":0,"branchCycles":0}},"plp":{"impiled":{"opcode":40,"bytes":1,"cycles":4,"pageCycles":0,"branchCycles":0}},"rol":{"accumulator":{"opcode":42,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0},"implied":{"opcode":42,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0},"zero_page":{"opcode":38,"bytes":2,"cycles":5,"pageCycles":0,"branchCycles":0},"zero_page_x":{"opcode":54,"bytes":2,"cycles":6,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":46,"bytes":3,"cycles":6,"pageCycles":0,"branchCycles":0},"absolute_x":{"opcode":62,"bytes":3,"cycles":7,"pageCycles":0,"branchCycles":0}},"ror":{"accumulator":{"opcode":106,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0},"implied":{"opcode":106,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0},"zero_page":{"opcode":102,"bytes":2,"cycles":5,"pageCycles":0,"branchCycles":0},"zero_page_x":{"opcode":118,"bytes":2,"cycles":6,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":110,"bytes":3,"cycles":6,"pageCycles":0,"branchCycles":0},"absolute_x":{"opcode":126,"bytes":3,"cycles":7,"pageCycles":0,"branchCycles":0}},"rti":{"implied":{"opcode":64,"bytes":1,"cycles":6,"pageCycles":0,"branchCycles":0}},"rts":{"implied":{"opcode":96,"bytes":1,"cycles":6,"pageCycles":0,"branchCycles":0}},"sbc":{"immediate":{"opcode":233,"bytes":2,"cycles":2,"pageCycles":0,"branchCycles":0},"zero_page":{"opcode":229,"bytes":2,"cycles":3,"pageCycles":0,"branchCycles":0},"zero_page_x":{"opcode":245,"bytes":2,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":237,"bytes":3,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute_x":{"opcode":253,"bytes":3,"cycles":4,"pageCycles":1,"branchCycles":0},"absolute_y":{"opcode":249,"bytes":3,"cycles":4,"pageCycles":1,"branchCycles":0},"indirect_x":{"opcode":225,"bytes":2,"cycles":6,"pageCycles":0,"branchCycles":0},"indirect_y":{"opcode":241,"bytes":2,"cycles":5,"pageCycles":1,"branchCycles":0}},"sec":{"implied":{"opcode":56,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0}},"sed":{"implied":{"opcode":248,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0}},"sei":{"implied":{"opcode":120,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0}},"sta":{"zero_page":{"opcode":133,"bytes":2,"cycles":3,"pageCycles":0,"branchCycles":0},"zero_page_x":{"opcode":149,"bytes":2,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":141,"bytes":3,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute_x":{"opcode":157,"bytes":3,"cycles":5,"pageCycles":0,"branchCycles":0},"absolute_y":{"opcode":153,"bytes":3,"cycles":5,"pageCycles":0,"branchCycles":0},"indirect_x":{"opcode":129,"bytes":2,"cycles":6,"pageCycles":0,"branchCycles":0},"indirect_y":{"opcode":145,"bytes":2,"cycles":6,"pageCycles":0,"branchCycles":0}},"stx":{"zero_page":{"opcode":134,"bytes":2,"cycles":3,"pageCycles":0,"branchCycles":0},"zero_page_y":{"opcode":150,"bytes":2,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":142,"bytes":3,"cycles":4,"pageCycles":0,"branchCycles":0}},"sty":{"zero_page":{"opcode":132,"bytes":2,"cycles":3,"pageCycles":0,"branchCycles":0},"zero_page_x":{"opcode":148,"bytes":2,"cycles":4,"pageCycles":0,"branchCycles":0},"absolute":{"opcode":140,"bytes":3,"cycles":4,"pageCycles":0,"branchCycles":0}},"tax":{"implied":{"opcode":170,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0}},"tay":{"implied":{"opcode":168,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0}},"tsx":{"implied":{"opcode":186,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0}},"txa":{"implied":{"opcode":138,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0}},"txs":{"implied":{"opcode":154,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0}},"tya":{"implied":{"opcode":152,"bytes":1,"cycles":2,"pageCycles":0,"branchCycles":0}}}'),Xe=Object.freeze(R.t(Xt,2)),Pt=Object.freeze(Object.keys(Xe)),Tt=Object.freeze(new Set(Pt));class $t extends Error{constructor(e){super(`Invlaid instruction: ${e}`)}}class wt extends Error{constructor(e,t){super(`Invalid addressing mode for ${e}: ${t}`)}}class fe{constructor(e,t,o){this._addressingMode=t,this._definition=o,this._name=e}static get(e,t){if(!function Ot(i){return Tt.has(i.toLowerCase())}(e))throw new $t(e);const o=Xe[e];if(!o[t])throw new wt(e,t);return new fe(e,t,o[t])}get addressingMode(){return this._addressingMode}get branchCycles(){return this._definition.branchCycles}get cycles(){return this._definition.cycles}get length(){return this._definition.bytes}get name(){return this._name}get opcode(){return this._definition.opcode}get pageCycles(){return this._definition.pageCycles}}class B extends Error{constructor(e,{lineNumber:t,assembly:o}){let r=`Assembly Error, line ${t} near "${o}": ${e}`;W.getInstance().error.next(r),super(r)}}function Ze(i){return Array.from(i).map(e=>e.toString(16)).map(e=>e.length<2?`0${e}`:e).join("").toUpperCase()}class U{constructor(e){const{line:t,bytes:o}=e;this._line=t,this.address=-1,this._bytes=new Uint8Array(o)}get line(){return this._line}get address(){return this._address}set address(e){this._address=e}get bytes(){return this._bytes}setBytes(e){this._bytes=e}get hex(){return Ze(this.bytes)}get length(){return this.bytes.length}}class ge{constructor(e){const{line:t,name:o,params:r}=e;this._line=t,this._name=o,this._params=r}get line(){return this._line}get name(){return this._name}get params(){return this._params}}function Pe(i){const{line:e,params:t}=i;if(0===t.length)return null;const o=[];return t.forEach((r,p)=>{if(r.isNumber()){let u=r.data.value;for(;u>255;)o.push(255&u),u>>>=8;o.push(u)}else{if(!r.isStringLiteral())throw new B(`.byte - invalid non-numeric/string parameter at index '${p}'`,e);r.data.value.split("").forEach((u,I)=>{const X=u.charCodeAt(0);if(X>255)throw new B(`.byte - encountered non-bytesized string literal character '${u}' at string index ${I}`,e);o.push(X)})}}),new U({bytes:o,line:e})}const Et={byt:Pe,byte:Pe,word:function Lt(i){const{line:e,params:t}=i;if(0===t.length)return null;const o=[];return t.forEach((r,p)=>{if(!r.isNumber())throw new B(`.word - invalid non-numeric parameter at index '${p}'`,e);{let u=r.data.value;for(;u>255;)o.push(255&u),u>>>=8;o.push(u)}}),new U({bytes:o,line:e})},addr:function Rt(i){const{line:e,params:t}=i;return 0===t.length?null:new U({bytes:[0,0],line:e})},org:function Bt(i){const{params:e}=i;if(1!==e.length||!e[0].isNumber())throw new B(".org expects a single numeric command",i.line);return e[0].data.value}};function Te(i){const{line:e,name:t}=i,o=Et[t];if(!o)throw new B(`Invalid command "${t}.`,e);return o(i)}class G{constructor({info:e,localLabel:t,value:o,line:r}){this._info=e,this._line=r,this.address=-1,this._bytes=new Uint8Array,this.value=o,this.localLabel=t}get address(){return this._address}set address(e){this._address=e}get addressingMode(){return this.info.addressingMode}get bytes(){return this._bytes}set bytes(e){this._bytes=e}get hex(){return Ze(this.bytes)}get info(){return this._info}get length(){return this.info.length}get line(){return this._line}get name(){return this.info.name}get opcode(){return this.info.opcode}get source(){return this.line.assembly}get value(){return this._value}set value(e){this._value=e}}class ee{constructor(e){const{name:t,local:o}=e;this.address=-1,this._local=o,this._name=t}get address(){return this._address}set address(e){this._address=e}get local(){return this._local}get name(){return this._name}}class $e{constructor(){this.constants=new Map}}class Dt{static statementList(e,t){return e.children.map(o=>D(o,t)).filter(o=>!!o)}static assignment(e,t){const[o,r]=e.children,p=o.data.value,u=D(r,t);if(u.isIdentifier())throw new B(`'${u.data.value}' is not defined.`,e.line);t.constants.set(p,u)}static command(e,t){const{line:o}=e,{name:r}=e.data,p=e.children.map(u=>D(u,t));return new ge({line:o,name:r,params:p})}static label(e,t){const{name:o}=e.data;return new ee({name:o,local:!1})}static localLabel(e,t){const{name:o}=e.data;return new ee({name:o,local:!0})}static instruction(e,t){const{name:o,mode:r}=e.data;let p,u="",I=!1;switch(r){case"accumulator":u="accumulator";break;case"expression":p=D(e.children[0],t),p.isNumber()?u=p.data.value<=255?"zero_page":"absolute":p.isImmediate()?u="immediate":p.isIdentifier()&&(u="absolute");break;case"implicit":u="implied";break;case"indirect":u="indirect",p=D(e.children[0],t);break;case"indirectX":u="indirect_x",p=D(e.children[0],t);break;case"indirectY":u="indirect_y",p=D(e.children[0],t);break;case"localLabel":u="jmp"===o?"absolute":"relative",p=e.children[0],I=!0;break;case"relative":u="relative",p=D(e.children[0],t);break;case"xIndex":if(p=D(e.children[0],t),p.isNumber())u=p.data.value<=255?"zero_page_x":"absolute_x";else{if(p.isImmediate())throw new B("Expected an address for x-indexed addressing mode.",e.line);p.isIdentifier()&&(u="absolute_x")}break;case"yIndex":if(p=D(e.children[0],t),p.isNumber())u=p.data.value<=255?"zero_page_y":"absolute_y";else{if(p.isImmediate())throw new B("Expected an address for y-indexed addressing mode.",e.line);p.isIdentifier()&&(u="absolute_y")}}try{const X=fe.get(o,u),{line:y}=e;return new G({info:X,localLabel:I,line:y,value:p})}catch(X){throw new B(X.message,e.line)}}static identifier(e,t){const{value:o}=e.data;return t.constants.has(o)?t.constants.get(o):e}static immediate(e,t){if(e.data.value>255)throw new B("Immediate values must be between 0 and 255.",e.line);return e}static number(e,t){return e}static stringLiteral(e,t){return e}}function D(i,e){e||(e=new $e);const t=Dt[i.type];if(!t)throw new B(`Unknown parse node type "${i.type}"`,i.line);return t(i,e)}function we(i){let t=D(i,new $e);t=function Nt(i){return i.map(e=>e instanceof ge&&"org"!==e.name?Te(e):e).filter(e=>!!e)}(t),function kt(i){let e=0;for(const t of i)if(t instanceof ge){const{name:o}=t;if("org"!==o)throw new B(`Encountered invalid command "${o}" during address assignment`,t.line);e=Te(t)}else t instanceof ee?t.address=e:(t instanceof G||t instanceof U)&&(t.address=e,e+=t.length)}(t);const o={local:new Map,global:new Map};return t.filter(r=>r instanceof ee).forEach(r=>{(r.local?o.local:o.global).set(r.name,r.address)}),t.filter(r=>r instanceof G).forEach(r=>{(function Yt({local:i,global:e},t){const{addressingMode:o,localLabel:r,value:p}=t;if(!p||!p.isIdentifier())return;const u=p.data.value,I=r?i.get(u):e.get(u);"number"==typeof I&&(("absolute"===o||"absolute_x"===o||"absolute_y"===o)&&(t.value=new M("number",[],{value:I}),t.value.line=p.line),"relative"===o)&&(t.value=new M("number",[],{value:I-t.address}),t.value.line=p.line)})(o,r),function qt(i){const{addressingMode:e,opcode:t,value:o}=i;if("implied"===e||"accumulator"===e)return void(i.bytes=[t]);if(!o)throw new B("Internal error: expected instruction to have value",i.line);if(o.isIdentifier())return;const r=o.data.value;switch(e){case"zero_page":case"immediate":case"zero_page_x":case"zero_page_y":case"indirect_x":case"indirect_x":case"indirect_y":case"indirect_y":i.bytes=new Uint8Array([t,r]);break;case"relative":i.bytes=new Uint8Array([t,r-i.length]);break;case"indirect":case"absolute":case"absolute_x":case"absolute_y":i.bytes=new Uint8Array([t,255&r,(65280&r)>>8])}}(r)}),t.map(r=>{if(r instanceof U){const p=r.line._data.assembly.split(" ");if(".addr"===p[0]){const u=o.global.get(p[1]);r.setBytes([255&u,u>>>8])}}}),t.filter(r=>r instanceof U||r instanceof G||r instanceof ee)}class Oe{static toHexString(e,t=!1){const p=we(Se(e)).filter(I=>I instanceof G||I instanceof U),u=[];return p.forEach(I=>{if(!I.bytes||0===I.bytes.length){const{lineNumber:y}=I.line,{source:A}=I;throw new Error(`Unable to generate hex for line ${y} "${A}".`)}let X="";for(let y=0;y<=I.hex.length;++y)y%2==0&&(X+=I.hex.slice(y,y+2)+" ");u.push(t?X:`${I._address.toString(16)}: ${X}`)}),u.join(t?" ":"\n")}static inspect(e){we(Se(e)).forEach(o=>{const r=function zt(i){const e=i.toString(16);return`${i%2==1?"0":""}${e}`.toUpperCase()}(o.address);o instanceof G?console.log(r,o.hex,"\t",o.source):console.log(r,(o.local?"@":"")+o.name+":")})}}let Ut=(()=>{class i{constructor(t,o){this.alertCtrl=t,this.toastCtrl=o,W.getInstance().error.subscribe(r=>this.showError(r))}assembe(t){return Oe.toHexString(t)}inspect(t){Oe.inspect(t)}showError(t){return(0,pe.mG)(this,void 0,void 0,function*(){t&&(yield(yield this.toastCtrl.create({message:t,duration:1e4,position:"top",mode:"md",buttons:[{icon:"close",role:"cancel"}]})).present())})}}return i.\u0275fac=function(t){return new(t||i)(s.LFG(b.Br),s.LFG(b.yF))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Jt=["editorContainer"];let Vt=(()=>{class i{constructor(t,o,r,p){this.toastCtrl=t,this.monacoEditorService=o,this.buffer=r,this.assembler=p,this.source=";**************************************************************\n  ;*                                                            *\n  ;*      Welcome To 6502 8-Bits Computer Emulator:             *\n  ;*                                                            *\n  ;**************************************************************\n  ;\n  ; System Vector Locations\n  NMI     = $FFFA ; non maskable interrupt address\n  RESB    = $FFFC ; restart address\n  IRQ     = $FFFE ; interrupt address\n  \n  PORTB   = $6000 ; via port B address\n  PORTA   = $6001 ; via port A address\n  DDRB    = $6002 ; via port B In/Out Mode address\n  DDRA    = $6003 ; via port A In/Out Mode address\n  \n  IFR     = $600d ; via Interrupt Flag Register\n  IER     = $600e ; via Interrupt Enable Register\n  \n  PROG    = $8000 ; program origin\n  \n  .org PROG\n  RESTART:\n  ; CODE HERE\n  \n  .org RESB\n  .addr RESTART   \n",this.title="CODE",this.code="",this.isSource=!0,this.options={theme:"myCoolTheme",language:"asm",value:this.source,automaticLayout:!0}}ngOnInit(){}ngAfterViewInit(){this.monacoEditorService.load(),this.initMonaco()}initMonaco(){this.monacoEditorService.loaded?(monaco.languages.register({id:"asm"}),monaco.languages.setMonarchTokensProvider("asm",{tokenizer:{root:[[/\=/,"assignment"],[/\;.*/,"comment"],[/\".*/,"string"],[/\$[0-9a-zA-Z]\w+/,"values"],[/\#[0-9a-zA-Z]\w+/,"values"],[/\#%[0-9]\w+/,"values"],[/\%[0-9]\w+/,"values"],[/\#/,"values"],[/\$/,"values"],[/\%/,"values"],[/[0-9]\w+/,"values"],[/[A-Za-z].*\:/,"labels"],[/@[A-Za-z].*\:/,"labels"],[/\.\w+/,"command"],[/\./,"command"],[/\w+/,"instruction"]]}}),monaco.editor.defineTheme("myCoolTheme",{base:"vs-dark",inherit:!0,rules:[{token:"assignment",foreground:"fefefe"},{token:"values",foreground:"ff9009"},{token:"variables",foreground:"8edbff"},{token:"instruction",foreground:"8edbff"},{token:"command",foreground:"eb445a",fontStyle:"bold"},{token:"comment",foreground:"2dd36f"},{token:"string",foreground:"ffca22"},{token:"labels",foreground:"fefefe"}],colors:{}}),this._editor=monaco.editor.create(this._editorContainer.nativeElement,this.options)):this.monacoEditorService.loadingFinished.pipe((0,Ct.P)()).subscribe(()=>{this.initMonaco()})}loadSource(){this._editor.setValue(this.source),this.isSource=!0,this.title="CODE"}loadHex(){this.source=this._editor.getValue(),this._editor.setValue(this.code),this.isSource=!1,this.title="HEX"}assemble(){this.monacoEditorService.loaded&&(this.source=this._editor.getValue(),this.code=this.assembler.assembe(this.source),this.code&&(this.buffer.clear(),this.showToast("Assembled!"),this.load()))}load(){this.code.split("\n").forEach(t=>{let o=t.split(":")[0];const r=t.split(":")[1],p=parseInt(o,16);o&&r.split(" ").map((u,I)=>{if(""!=u){const X=parseInt(u,16);this.buffer.write(p+(I-1&255),X)}})})}showToast(t){return(0,pe.mG)(this,void 0,void 0,function*(){yield(yield this.toastCtrl.create({duration:5e3,message:t,position:"top",mode:"md",buttons:[{icon:"close",role:"cancel"}]})).present()})}}return i.\u0275fac=function(t){return new(t||i)(s.Y36(b.yF),s.Y36(At),s.Y36(ce),s.Y36(Ut))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-code"]],viewQuery:function(t,o){if(1&t&&s.Gf(Jt,7),2&t){let r;s.iGM(r=s.CRH())&&(o._editorContainer=r.first)}},decls:12,vars:2,consts:[["slot","start"],["slot","end","fill","solid",3,"click"],["slot","end","fill","solid",3,"disabled","click"],[1,"editor-container",2,"height","90%"],["editorContainer",""]],template:function(t,o){1&t&&(s.TgZ(0,"ion-buttons")(1,"ion-title",0)(2,"h1"),s._uU(3),s.qZA()(),s.TgZ(4,"ion-button",1),s.NdJ("click",function(){return o.loadSource()}),s._uU(5,"code"),s.qZA(),s.TgZ(6,"ion-button",1),s.NdJ("click",function(){return o.loadHex()}),s._uU(7,"hex"),s.qZA(),s.TgZ(8,"ion-button",2),s.NdJ("click",function(){return o.assemble()}),s._uU(9,"ASSEMBLE"),s.qZA()(),s._UZ(10,"div",3,4)),2&t&&(s.xp6(3),s.Oqu(o.title),s.xp6(5),s.Q6J("disabled",!o.isSource))},dependencies:[b.YG,b.Sm,b.wd]}),i})(),Re=(()=>{class i{constructor(){this.zeroPad=(t,o)=>String(t).padStart(o,"0")}transform(t,o){return this.zeroPad(t,o).toUpperCase()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=s.Yjl({name:"zeropad",type:i,pure:!0}),i})();function Gt(i,e){if(1&i&&(s.TgZ(0,"th"),s._uU(1),s.ALo(2,"zeropad"),s.qZA()),2&i){const t=e.$implicit;s.xp6(1),s.Oqu(s.xi3(2,1,t,2))}}const Qt=function(i){return{color:i}};function jt(i,e){if(1&i&&(s.TgZ(0,"td",6),s._uU(1),s.ALo(2,"zeropad"),s.qZA()),2&i){const t=e.$implicit,o=s.oxw(2);s.Q6J("ngStyle",s.VKq(5,Qt,"var(--ion-color-"+o.getColor(t)+");")),s.xp6(1),s.hij(" ",s.xi3(2,2,t,2)," ")}}function Ht(i,e){if(1&i&&(s.TgZ(0,"tr")(1,"td"),s._uU(2),s.ALo(3,"zeropad"),s.qZA(),s.YNc(4,jt,3,7,"td",5),s.qZA()),2&i){const t=e.$implicit,o=s.oxw();s.xp6(2),s.Oqu(s.xi3(3,2,t,4)),s.xp6(2),s.Q6J("ngForOf",o.getCols(t))}}let Kt=(()=>{class i{constructor(t){this.buffer=t,this.colors=["dark","primary","success","warning","danger","secundary","tertiary"],this.LSB_ADDRESS=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],this.MSB_ADDRESS=[],this.FROM="0000"}ngOnInit(){this.buffer.getBus().subscribe(t=>{this.BUS=t,this.MSB_ADDRESS=Object.keys(t)})}load(){let t=parseInt(this.FROM,16);this.buffer.FromTo(t,t+255),this.buffer.load()}clear(){this.buffer.clear()}getCols(t){return this.BUS[t]}getColor(t){const o=parseInt(t)%this.colors.length;return this.colors[o]}get TO(){return(parseInt(this.FROM,16)+255).toString(16)}}return i.\u0275fac=function(t){return new(t||i)(s.Y36(ce))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-mem-buffer"]],decls:19,vars:10,consts:[["slot","start"],["type","text","maxlength","4",2,"width","4em",3,"ngModel","ngModelChange"],["slot","end","fill","solid",3,"click"],["id","customers"],[4,"ngFor","ngForOf"],[3,"ngStyle",4,"ngFor","ngForOf"],[3,"ngStyle"]],template:function(t,o){1&t&&(s.TgZ(0,"ion-buttons")(1,"ion-title",0)(2,"h2"),s._uU(3),s.ALo(4,"uppercase"),s.ALo(5,"zeropad"),s.qZA()(),s.TgZ(6,"input",1),s.NdJ("ngModelChange",function(p){return o.FROM=p}),s.qZA(),s.TgZ(7,"ion-button",2),s.NdJ("click",function(){return o.load()}),s._uU(8,"LOAD"),s.qZA(),s.TgZ(9,"ion-button",2),s.NdJ("click",function(){return o.clear()}),s._uU(10,"CLEAR"),s.qZA()(),s.TgZ(11,"table",3)(12,"thead")(13,"tr")(14,"th"),s._uU(15,"-"),s.qZA(),s.YNc(16,Gt,3,4,"th",4),s.qZA()(),s.TgZ(17,"tbody"),s.YNc(18,Ht,5,5,"tr",4),s.qZA()()),2&t&&(s.xp6(3),s.AsE("From: ",s.lcZ(4,5,o.FROM)," - To: ",s.xi3(5,7,o.TO,4),""),s.xp6(3),s.Q6J("ngModel",o.FROM),s.xp6(10),s.Q6J("ngForOf",o.LSB_ADDRESS),s.xp6(2),s.Q6J("ngForOf",o.MSB_ADDRESS))},dependencies:[z.sg,z.PC,E.Fj,E.JJ,E.nD,E.On,b.YG,b.Sm,b.wd,z.gd,Re],styles:[".container[_ngcontent-%COMP%]{height:50%;overflow-y:scroll;border:.5px solid gray}#customers[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;border-collapse:collapse;width:100%}#customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], #customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:6px;margin:2px;text-align:center}#customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:12px;background-color:#04aa6d;color:#fff}"]}),i})(),Wt=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-mem-map"]],decls:31,vars:0,consts:[[2,"height","140px","display","flex"],[1,"sm-kb","free","map"],[1,"sm-kb","stack","map"],[1,"lg-kb","free","map"],[1,"sm-kb","via","map"],[1,"lg-kb","rom","map"],["size","12"]],template:function(t,o){1&t&&(s.TgZ(0,"div",0)(1,"div",1)(2,"p"),s._uU(3,"ZeroPage 0x0000 - 0x00FF"),s.qZA()(),s.TgZ(4,"div",2)(5,"p"),s._uU(6,"Stack 0x0100 - 0x01FF"),s.qZA()(),s.TgZ(7,"div",3)(8,"p"),s._uU(9,"Free 0x0200 - 0x5FFF"),s.qZA()(),s.TgZ(10,"div",4)(11,"p"),s._uU(12,"VIA 0x6000 - 0x6FFF"),s.qZA()(),s.TgZ(13,"div",1)(14,"p"),s._uU(15,"Free 0x7000 - 0x7FF0"),s.qZA()(),s.TgZ(16,"div",5)(17,"p"),s._uU(18,"Rom 0x8000 - 0xFFF9"),s.qZA()()(),s.TgZ(19,"ion-row")(20,"ion-col",6)(21,"h4"),s._uU(22,"System Vectors"),s.qZA(),s.TgZ(23,"p"),s._uU(24,"Random: 0x00FE"),s.qZA(),s.TgZ(25,"p"),s._uU(26,"NMI: 0xFFFA"),s.qZA(),s.TgZ(27,"p"),s._uU(28,"RESET: 0xFFFC"),s.qZA(),s.TgZ(29,"p"),s._uU(30,"IRQ: 0xFFFE"),s.qZA()()())},dependencies:[b.wI,b.Nd],styles:[".map[_ngcontent-%COMP%]{padding:5px;border:1px solid gray}.sm-kb[_ngcontent-%COMP%]{width:100px}.lg-kb[_ngcontent-%COMP%]{width:400px}.ram[_ngcontent-%COMP%]{background:rgba(255,184,3,.816)}.via[_ngcontent-%COMP%]{background:rgba(73,255,53,.784)}.stack[_ngcontent-%COMP%]{background:rgba(255,3,3,.816)}.free[_ngcontent-%COMP%]{background:rgba(56,53,255,.784)}.rom[_ngcontent-%COMP%]{background:rgba(239,14,228,.816)}"]}),i})(),es=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-schematic"]],decls:1,vars:0,consts:[["src","assets/imgs/6502.png","alt","schematic"]],template:function(t,o){1&t&&s._UZ(0,"img",0)},styles:["img[_ngcontent-%COMP%]{width:100%;height:100%}"]}),i})();var l=(()=>{return(i=l||(l={}))[i.C=1]="C",i[i.Z=2]="Z",i[i.I=4]="I",i[i.D=8]="D",i[i.B=16]="B",i[i.U=32]="U",i[i.V=64]="V",i[i.N=128]="N",l;var i})(),T=(()=>{return(i=T||(T={}))[i.A=1]="A",i[i.B=2]="B",i[i.C=4]="C",i[i.D=8]="D",i[i.E=16]="E",i[i.F=32]="F",i[i.G=64]="G",i[i.H=128]="H",T;var i})(),w=(()=>{return(i=w||(w={}))[i.A=1]="A",i[i.B=2]="B",i[i.C=4]="C",i[i.D=8]="D",i[i.N=16]="N",i[i.E=32]="E",i[i.RW=64]="RW",i[i.RS=128]="RS",w;var i})();class f{constructor(){this.instructions=[[{name:"BRK",opcode:0,exec:this.BRK,addMode:this.IMP,cicle:7},{name:"ORA",opcode:1,exec:this.ORA,addMode:this.IZX,cicle:6},{name:"???",opcode:2,exec:this.XXX,addMode:this.IMP,cicle:2},{name:"???",opcode:3,exec:this.XXX,addMode:this.IMP,cicle:8},{name:"???",opcode:4,exec:this.NOP,addMode:this.IMP,cicle:3},{name:"ORA",opcode:5,exec:this.ORA,addMode:this.ZP0,cicle:3},{name:"ASL",opcode:6,exec:this.ASL,addMode:this.ZP0,cicle:5},{name:"???",opcode:7,exec:this.XXX,addMode:this.IMP,cicle:5},{name:"PHP",opcode:8,exec:this.PHP,addMode:this.IMP,cicle:3},{name:"ORA",opcode:9,exec:this.ORA,addMode:this.IMM,cicle:2},{name:"ASL",opcode:10,exec:this.ASL,addMode:this.IMP,cicle:2},{name:"???",opcode:11,exec:this.XXX,addMode:this.IMP,cicle:2},{name:"???",opcode:12,exec:this.NOP,addMode:this.IMP,cicle:4},{name:"ORA",opcode:13,exec:this.ORA,addMode:this.ABS,cicle:4},{name:"ASL",opcode:14,exec:this.ASL,addMode:this.ABS,cicle:6},{name:"???",opcode:15,exec:this.XXX,addMode:this.IMP,cicle:6}],[{name:"BPL",opcode:16,exec:this.BPL,addMode:this.REL,cicle:2},{name:"ORA",opcode:17,exec:this.ORA,addMode:this.IZY,cicle:5},{name:"???",opcode:18,exec:this.XXX,addMode:this.IMP,cicle:2},{name:"???",opcode:19,exec:this.XXX,addMode:this.IMP,cicle:8},{name:"???",opcode:20,exec:this.NOP,addMode:this.IMP,cicle:4},{name:"ORA",opcode:21,exec:this.ORA,addMode:this.ZPX,cicle:4},{name:"ASL",opcode:22,exec:this.ASL,addMode:this.ZPX,cicle:6},{name:"???",opcode:23,exec:this.XXX,addMode:this.IMP,cicle:6},{name:"CLC",opcode:24,exec:this.CLC,addMode:this.IMP,cicle:2},{name:"ORA",opcode:25,exec:this.ORA,addMode:this.ABY,cicle:4},{name:"???",opcode:26,exec:this.NOP,addMode:this.IMP,cicle:2},{name:"???",opcode:27,exec:this.XXX,addMode:this.IMP,cicle:7},{name:"???",opcode:28,exec:this.NOP,addMode:this.IMP,cicle:4},{name:"ORA",opcode:29,exec:this.ORA,addMode:this.ABX,cicle:4},{name:"ASL",opcode:30,exec:this.ASL,addMode:this.ABX,cicle:7},{name:"???",opcode:31,exec:this.XXX,addMode:this.IMP,cicle:7}],[{name:"JSR",opcode:32,exec:this.JSR,addMode:this.ABS,cicle:6},{name:"AND",opcode:33,exec:this.AND,addMode:this.IZX,cicle:6},{name:"???",opcode:34,exec:this.XXX,addMode:this.IMP,cicle:2},{name:"???",opcode:35,exec:this.XXX,addMode:this.IMP,cicle:8},{name:"BIT",opcode:36,exec:this.BIT,addMode:this.ZP0,cicle:3},{name:"AND",opcode:37,exec:this.AND,addMode:this.ZP0,cicle:3},{name:"ROL",opcode:38,exec:this.ROL,addMode:this.ZP0,cicle:5},{name:"???",opcode:39,exec:this.XXX,addMode:this.IMP,cicle:5},{name:"PLP",opcode:40,exec:this.PLP,addMode:this.IMP,cicle:4},{name:"AND",opcode:41,exec:this.AND,addMode:this.IMM,cicle:2},{name:"ROL",opcode:42,exec:this.ROL,addMode:this.IMP,cicle:2},{name:"???",opcode:43,exec:this.XXX,addMode:this.IMP,cicle:2},{name:"BIT",opcode:44,exec:this.BIT,addMode:this.ABS,cicle:4},{name:"AND",opcode:45,exec:this.AND,addMode:this.ABS,cicle:4},{name:"ROL",opcode:46,exec:this.ROL,addMode:this.ABS,cicle:6},{name:"???",opcode:47,exec:this.XXX,addMode:this.IMP,cicle:6}],[{name:"BMI",opcode:48,exec:this.BMI,addMode:this.REL,cicle:2},{name:"AND",opcode:49,exec:this.AND,addMode:this.IZY,cicle:5},{name:"???",opcode:50,exec:this.XXX,addMode:this.IMP,cicle:2},{name:"???",opcode:51,exec:this.XXX,addMode:this.IMP,cicle:8},{name:"???",opcode:52,exec:this.NOP,addMode:this.IMP,cicle:4},{name:"AND",opcode:53,exec:this.AND,addMode:this.ZPX,cicle:4},{name:"ROL",opcode:54,exec:this.ROL,addMode:this.ZPX,cicle:6},{name:"???",opcode:55,exec:this.XXX,addMode:this.IMP,cicle:6},{name:"SEC",opcode:56,exec:this.SEC,addMode:this.IMP,cicle:2},{name:"AND",opcode:57,exec:this.AND,addMode:this.ABY,cicle:4},{name:"???",opcode:58,exec:this.NOP,addMode:this.IMP,cicle:2},{name:"???",opcode:59,exec:this.XXX,addMode:this.IMP,cicle:7},{name:"???",opcode:60,exec:this.NOP,addMode:this.IMP,cicle:4},{name:"AND",opcode:61,exec:this.AND,addMode:this.ABX,cicle:4},{name:"ROL",opcode:62,exec:this.ROL,addMode:this.ABX,cicle:7},{name:"???",opcode:63,exec:this.XXX,addMode:this.IMP,cicle:7}],[{name:"RTI",opcode:64,exec:this.RTI,addMode:this.IMP,cicle:6},{name:"EOR",opcode:65,exec:this.EOR,addMode:this.IZX,cicle:6},{name:"???",opcode:66,exec:this.XXX,addMode:this.IMP,cicle:2},{name:"???",opcode:67,exec:this.XXX,addMode:this.IMP,cicle:8},{name:"???",opcode:68,exec:this.NOP,addMode:this.IMP,cicle:3},{name:"EOR",opcode:69,exec:this.EOR,addMode:this.ZP0,cicle:3},{name:"LSR",opcode:70,exec:this.LSR,addMode:this.ZP0,cicle:5},{name:"???",opcode:71,exec:this.XXX,addMode:this.IMP,cicle:5},{name:"PHA",opcode:72,exec:this.PHA,addMode:this.IMP,cicle:3},{name:"EOR",opcode:73,exec:this.EOR,addMode:this.IMM,cicle:2},{name:"LSR",opcode:74,exec:this.LSR,addMode:this.IMP,cicle:2},{name:"???",opcode:75,exec:this.XXX,addMode:this.IMP,cicle:2},{name:"JMP",opcode:76,exec:this.JMP,addMode:this.ABS,cicle:3},{name:"EOR",opcode:77,exec:this.EOR,addMode:this.ABS,cicle:4},{name:"LSR",opcode:78,exec:this.LSR,addMode:this.ABS,cicle:6},{name:"???",opcode:79,exec:this.XXX,addMode:this.IMP,cicle:6}],[{name:"BVC",opcode:80,exec:this.BVC,addMode:this.REL,cicle:2},{name:"EOR",opcode:81,exec:this.EOR,addMode:this.IZY,cicle:5},{name:"???",opcode:82,exec:this.XXX,addMode:this.IMP,cicle:2},{name:"???",opcode:83,exec:this.XXX,addMode:this.IMP,cicle:8},{name:"???",opcode:84,exec:this.NOP,addMode:this.IMP,cicle:4},{name:"EOR",opcode:85,exec:this.EOR,addMode:this.ZPX,cicle:4},{name:"LSR",opcode:86,exec:this.LSR,addMode:this.ZPX,cicle:6},{name:"???",opcode:87,exec:this.XXX,addMode:this.IMP,cicle:6},{name:"CLI",opcode:88,exec:this.CLI,addMode:this.IMP,cicle:2},{name:"EOR",opcode:89,exec:this.EOR,addMode:this.ABY,cicle:4},{name:"???",opcode:90,exec:this.NOP,addMode:this.IMP,cicle:2},{name:"???",opcode:91,exec:this.XXX,addMode:this.IMP,cicle:7},{name:"???",opcode:92,exec:this.NOP,addMode:this.IMP,cicle:4},{name:"EOR",opcode:93,exec:this.EOR,addMode:this.ABX,cicle:4},{name:"LSR",opcode:94,exec:this.LSR,addMode:this.ABX,cicle:7},{name:"???",opcode:95,exec:this.XXX,addMode:this.IMP,cicle:7}],[{name:"RTS",opcode:96,exec:this.RTS,addMode:this.IMP,cicle:6},{name:"ADC",opcode:97,exec:this.ADC,addMode:this.IZX,cicle:6},{name:"???",opcode:98,exec:this.XXX,addMode:this.IMP,cicle:2},{name:"???",opcode:99,exec:this.XXX,addMode:this.IMP,cicle:8},{name:"???",opcode:100,exec:this.NOP,addMode:this.IMP,cicle:3},{name:"ADC",opcode:101,exec:this.ADC,addMode:this.ZP0,cicle:3},{name:"ROR",opcode:102,exec:this.ROR,addMode:this.ZP0,cicle:5},{name:"???",opcode:103,exec:this.XXX,addMode:this.IMP,cicle:5},{name:"PLA",opcode:104,exec:this.PLA,addMode:this.IMP,cicle:4},{name:"ADC",opcode:105,exec:this.ADC,addMode:this.IMM,cicle:2},{name:"ROR",opcode:106,exec:this.ROR,addMode:this.IMP,cicle:2},{name:"???",opcode:107,exec:this.XXX,addMode:this.IMP,cicle:2},{name:"JMP",opcode:108,exec:this.JMP,addMode:this.IND,cicle:5},{name:"ADC",opcode:109,exec:this.ADC,addMode:this.ABS,cicle:4},{name:"ROR",opcode:110,exec:this.ROR,addMode:this.ABS,cicle:6},{name:"???",opcode:111,exec:this.XXX,addMode:this.IMP,cicle:6}],[{name:"BVS",opcode:112,exec:this.BVS,addMode:this.REL,cicle:2},{name:"ADC",opcode:113,exec:this.ADC,addMode:this.IZY,cicle:5},{name:"???",opcode:114,exec:this.XXX,addMode:this.IMP,cicle:2},{name:"???",opcode:115,exec:this.XXX,addMode:this.IMP,cicle:8},{name:"???",opcode:116,exec:this.NOP,addMode:this.IMP,cicle:4},{name:"ADC",opcode:117,exec:this.ADC,addMode:this.ZPX,cicle:4},{name:"ROR",opcode:118,exec:this.ROR,addMode:this.ZPX,cicle:6},{name:"???",opcode:119,exec:this.XXX,addMode:this.IMP,cicle:6},{name:"SEI",opcode:120,exec:this.SEI,addMode:this.IMP,cicle:2},{name:"ADC",opcode:121,exec:this.ADC,addMode:this.ABY,cicle:4},{name:"???",opcode:122,exec:this.NOP,addMode:this.IMP,cicle:2},{name:"???",opcode:123,exec:this.XXX,addMode:this.IMP,cicle:7},{name:"???",opcode:124,exec:this.NOP,addMode:this.IMP,cicle:4},{name:"ADC",opcode:125,exec:this.ADC,addMode:this.ABX,cicle:4},{name:"ROR",opcode:126,exec:this.ROR,addMode:this.ABX,cicle:7},{name:"???",opcode:127,exec:this.XXX,addMode:this.IMP,cicle:7}],[{name:"???",opcode:128,exec:this.NOP,addMode:this.IMP,cicle:2},{name:"STA",opcode:129,exec:this.STA,addMode:this.IZX,cicle:6},{name:"???",opcode:130,exec:this.NOP,addMode:this.IMP,cicle:2},{name:"???",opcode:131,exec:this.XXX,addMode:this.IMP,cicle:6},{name:"STY",opcode:132,exec:this.STY,addMode:this.ZP0,cicle:3},{name:"STA",opcode:133,exec:this.STA,addMode:this.ZP0,cicle:3},{name:"STX",opcode:134,exec:this.STX,addMode:this.ZP0,cicle:3},{name:"???",opcode:135,exec:this.XXX,addMode:this.IMP,cicle:3},{name:"DEY",opcode:136,exec:this.DEY,addMode:this.IMP,cicle:2},{name:"???",opcode:137,exec:this.NOP,addMode:this.IMP,cicle:2},{name:"TXA",opcode:138,exec:this.TXA,addMode:this.IMP,cicle:2},{name:"???",opcode:139,exec:this.XXX,addMode:this.IMP,cicle:2},{name:"STY",opcode:140,exec:this.STY,addMode:this.ABS,cicle:4},{name:"STA",opcode:141,exec:this.STA,addMode:this.ABS,cicle:4},{name:"STX",opcode:142,exec:this.STX,addMode:this.ABS,cicle:4},{name:"???",opcode:143,exec:this.XXX,addMode:this.IMP,cicle:4}],[{name:"BCC",opcode:144,exec:this.BCC,addMode:this.REL,cicle:2},{name:"STA",opcode:145,exec:this.STA,addMode:this.IZY,cicle:6},{name:"???",opcode:146,exec:this.XXX,addMode:this.IMP,cicle:2},{name:"???",opcode:147,exec:this.XXX,addMode:this.IMP,cicle:6},{name:"STY",opcode:148,exec:this.STY,addMode:this.ZPX,cicle:4},{name:"STA",opcode:149,exec:this.STA,addMode:this.ZPX,cicle:4},{name:"STX",opcode:150,exec:this.STX,addMode:this.ZPY,cicle:4},{name:"???",opcode:151,exec:this.XXX,addMode:this.IMP,cicle:4},{name:"TYA",opcode:152,exec:this.TYA,addMode:this.IMP,cicle:2},{name:"STA",opcode:153,exec:this.STA,addMode:this.ABY,cicle:5},{name:"TXS",opcode:154,exec:this.TXS,addMode:this.IMP,cicle:2},{name:"???",opcode:155,exec:this.XXX,addMode:this.IMP,cicle:5},{name:"???",opcode:156,exec:this.NOP,addMode:this.IMP,cicle:5},{name:"STA",opcode:157,exec:this.STA,addMode:this.ABX,cicle:5},{name:"???",opcode:158,exec:this.XXX,addMode:this.IMP,cicle:5},{name:"???",opcode:159,exec:this.XXX,addMode:this.IMP,cicle:5}],[{name:"LDY",opcode:160,exec:this.LDY,addMode:this.IMM,cicle:2},{name:"LDA",opcode:161,exec:this.LDA,addMode:this.IZX,cicle:6},{name:"LDX",opcode:162,exec:this.LDX,addMode:this.IMM,cicle:2},{name:"???",opcode:163,exec:this.XXX,addMode:this.IMP,cicle:6},{name:"LDY",opcode:164,exec:this.LDY,addMode:this.ZP0,cicle:3},{name:"LDA",opcode:165,exec:this.LDA,addMode:this.ZP0,cicle:3},{name:"LDX",opcode:166,exec:this.LDX,addMode:this.ZP0,cicle:3},{name:"???",opcode:167,exec:this.XXX,addMode:this.IMP,cicle:3},{name:"TAY",opcode:168,exec:this.TAY,addMode:this.IMP,cicle:2},{name:"LDA",opcode:169,exec:this.LDA,addMode:this.IMM,cicle:2},{name:"TAX",opcode:170,exec:this.TAX,addMode:this.IMP,cicle:2},{name:"???",opcode:171,exec:this.XXX,addMode:this.IMP,cicle:2},{name:"LDY",opcode:172,exec:this.LDY,addMode:this.ABS,cicle:4},{name:"LDA",opcode:173,exec:this.LDA,addMode:this.ABS,cicle:4},{name:"LDX",opcode:174,exec:this.LDX,addMode:this.ABS,cicle:4},{name:"???",opcode:175,exec:this.XXX,addMode:this.IMP,cicle:4}],[{name:"BCS",opcode:176,exec:this.BCS,addMode:this.REL,cicle:2},{name:"LDA",opcode:177,exec:this.LDA,addMode:this.IZY,cicle:5},{name:"???",opcode:178,exec:this.XXX,addMode:this.IMP,cicle:2},{name:"???",opcode:179,exec:this.XXX,addMode:this.IMP,cicle:5},{name:"LDY",opcode:180,exec:this.LDY,addMode:this.ZPX,cicle:4},{name:"LDA",opcode:181,exec:this.LDA,addMode:this.ZPX,cicle:4},{name:"LDX",opcode:182,exec:this.LDX,addMode:this.ZPY,cicle:4},{name:"???",opcode:183,exec:this.XXX,addMode:this.IMP,cicle:4},{name:"CLV",opcode:184,exec:this.CLV,addMode:this.IMP,cicle:2},{name:"LDA",opcode:185,exec:this.LDA,addMode:this.ABY,cicle:4},{name:"TSX",opcode:186,exec:this.TSX,addMode:this.IMP,cicle:2},{name:"???",opcode:187,exec:this.XXX,addMode:this.IMP,cicle:4},{name:"LDY",opcode:188,exec:this.LDY,addMode:this.ABX,cicle:4},{name:"LDA",opcode:189,exec:this.LDA,addMode:this.ABX,cicle:4},{name:"LDX",opcode:190,exec:this.LDX,addMode:this.ABY,cicle:4},{name:"???",opcode:191,exec:this.XXX,addMode:this.IMP,cicle:4}],[{name:"CPY",opcode:192,exec:this.CPY,addMode:this.IMM,cicle:2},{name:"CMP",opcode:193,exec:this.CMP,addMode:this.IZX,cicle:6},{name:"???",opcode:194,exec:this.NOP,addMode:this.IMP,cicle:2},{name:"???",opcode:195,exec:this.XXX,addMode:this.IMP,cicle:8},{name:"CPY",opcode:196,exec:this.CPY,addMode:this.ZP0,cicle:3},{name:"CMP",opcode:197,exec:this.CMP,addMode:this.ZP0,cicle:3},{name:"DEC",opcode:198,exec:this.DEC,addMode:this.ZP0,cicle:5},{name:"???",opcode:199,exec:this.XXX,addMode:this.IMP,cicle:5},{name:"INY",opcode:200,exec:this.INY,addMode:this.IMP,cicle:2},{name:"CMP",opcode:201,exec:this.CMP,addMode:this.IMM,cicle:2},{name:"DEX",opcode:202,exec:this.DEX,addMode:this.IMP,cicle:2},{name:"WAI",opcode:203,exec:this.XXX,addMode:this.IMP,cicle:2},{name:"CPY",opcode:204,exec:this.CPY,addMode:this.ABS,cicle:4},{name:"CMP",opcode:205,exec:this.CMP,addMode:this.ABS,cicle:4},{name:"DEC",opcode:206,exec:this.DEC,addMode:this.ABS,cicle:6},{name:"???",opcode:207,exec:this.XXX,addMode:this.IMP,cicle:6}],[{name:"BNE",opcode:208,exec:this.BNE,addMode:this.REL,cicle:2},{name:"CMP",opcode:209,exec:this.CMP,addMode:this.IZY,cicle:5},{name:"???",opcode:210,exec:this.XXX,addMode:this.IMP,cicle:2},{name:"???",opcode:211,exec:this.XXX,addMode:this.IMP,cicle:8},{name:"???",opcode:212,exec:this.NOP,addMode:this.IMP,cicle:4},{name:"CMP",opcode:213,exec:this.CMP,addMode:this.ZPX,cicle:4},{name:"DEC",opcode:214,exec:this.DEC,addMode:this.ZPX,cicle:6},{name:"???",opcode:215,exec:this.XXX,addMode:this.IMP,cicle:6},{name:"CLD",opcode:216,exec:this.CLD,addMode:this.IMP,cicle:2},{name:"CMP",opcode:217,exec:this.CMP,addMode:this.ABY,cicle:4},{name:"NOP",opcode:218,exec:this.NOP,addMode:this.IMP,cicle:2},{name:"???",opcode:219,exec:this.XXX,addMode:this.IMP,cicle:7},{name:"???",opcode:220,exec:this.NOP,addMode:this.IMP,cicle:4},{name:"CMP",opcode:221,exec:this.CMP,addMode:this.ABX,cicle:4},{name:"DEC",opcode:222,exec:this.DEC,addMode:this.ABX,cicle:7},{name:"???",opcode:223,exec:this.XXX,addMode:this.IMP,cicle:7}],[{name:"CPX",opcode:224,exec:this.CPX,addMode:this.IMM,cicle:2},{name:"SBC",opcode:225,exec:this.SBC,addMode:this.IZX,cicle:6},{name:"???",opcode:226,exec:this.NOP,addMode:this.IMP,cicle:2},{name:"???",opcode:227,exec:this.XXX,addMode:this.IMP,cicle:8},{name:"CPX",opcode:228,exec:this.CPX,addMode:this.ZP0,cicle:3},{name:"SBC",opcode:229,exec:this.SBC,addMode:this.ZP0,cicle:3},{name:"INC",opcode:230,exec:this.INC,addMode:this.ZP0,cicle:5},{name:"???",opcode:231,exec:this.XXX,addMode:this.IMP,cicle:5},{name:"INX",opcode:232,exec:this.INX,addMode:this.IMP,cicle:2},{name:"SBC",opcode:233,exec:this.SBC,addMode:this.IMM,cicle:2},{name:"NOP",opcode:234,exec:this.NOP,addMode:this.IMP,cicle:2},{name:"???",opcode:235,exec:this.SBC,addMode:this.IMP,cicle:2},{name:"CPX",opcode:236,exec:this.CPX,addMode:this.ABS,cicle:4},{name:"SBC",opcode:237,exec:this.SBC,addMode:this.ABS,cicle:4},{name:"INC",opcode:238,exec:this.INC,addMode:this.ABS,cicle:6},{name:"???",opcode:239,exec:this.XXX,addMode:this.IMP,cicle:6}],[{name:"BEQ",opcode:240,exec:this.BEQ,addMode:this.REL,cicle:2},{name:"SBC",opcode:241,exec:this.SBC,addMode:this.IZY,cicle:5},{name:"???",opcode:242,exec:this.XXX,addMode:this.IMP,cicle:2},{name:"???",opcode:243,exec:this.XXX,addMode:this.IMP,cicle:8},{name:"???",opcode:244,exec:this.NOP,addMode:this.IMP,cicle:4},{name:"SBC",opcode:245,exec:this.SBC,addMode:this.ZPX,cicle:4},{name:"INC",opcode:246,exec:this.INC,addMode:this.ZPX,cicle:6},{name:"???",opcode:247,exec:this.XXX,addMode:this.IMP,cicle:6},{name:"SED",opcode:248,exec:this.SED,addMode:this.IMP,cicle:2},{name:"SBC",opcode:249,exec:this.SBC,addMode:this.ABY,cicle:4},{name:"NOP",opcode:250,exec:this.NOP,addMode:this.IMP,cicle:2},{name:"???",opcode:251,exec:this.XXX,addMode:this.IMP,cicle:7},{name:"???",opcode:252,exec:this.NOP,addMode:this.IMP,cicle:4},{name:"SBC",opcode:253,exec:this.SBC,addMode:this.ABX,cicle:4},{name:"INC",opcode:254,exec:this.INC,addMode:this.ABX,cicle:7},{name:"???",opcode:255,exec:this.XXX,addMode:this.IMP,cicle:7}]],this.a=0,this.x=0,this.y=0,this.stkp=0,this.pc=0,this.status=0,this.opcode=0,this.name="",this.fetched=0,this.pcl=0,this.pch=0,this.mlb=1,this.addr_rel=0,this.addr_abs=0,this.cycles=0,this.clock_count=0,this.debug=1,this.stop=!1,this.speed="1000000"}static getInstance(){return this.instance||(this.instance=new f),this.instance}deviceInfo(){return{device:"65C02",fabricant:"BSC",year:"2022",clock:this.speed+" Hz"}}disassemble(e,t){let o=e,r=0,p=0,u=0,I=0;const X={};for(;o<t;){I=o;let y="";const A=this.read(o);let _=A>>4,$=15&A;o++,y+=(null==A?void 0:A.toString(16))+" : ",y+=this.instructions[_][$].name+" ",this.instructions[_][$].addMode===this.IMP?y+=" {IMP}":this.instructions[_][$].addMode===this.IMM?(r=this.read(o),o++,y+="#$"+(null==r?void 0:r.toString(16))+" {IMM}"):this.instructions[_][$].addMode===this.ZP0?(p=this.read(o),o++,u=0,y+="$"+(null==p?void 0:p.toString(16))+" {ZP0}"):this.instructions[_][$].addMode===this.ZPX?(p=this.read(o),o++,u=0,y+="$"+(null==p?void 0:p.toString(16))+", X {ZPX}"):this.instructions[_][$].addMode===this.ZPY?(p=this.read(o),o++,u=0,y+="$"+(null==p?void 0:p.toString(16))+", Y {ZPY}"):this.instructions[_][$].addMode===this.IZX?(p=this.read(o),o++,u=0,y+="($"+(null==p?void 0:p.toString(16))+", X) {IZX}"):this.instructions[_][$].addMode===this.IZY?(p=this.read(o),o++,u=0,y+="($"+(null==p?void 0:p.toString(16))+"), Y {IZY}"):this.instructions[_][$].addMode===this.ABS?(p=this.read(o),o++,u=this.read(o),o++,y+="$"+(65535&u<<8|p).toString(16)+" {ABS}"):this.instructions[_][$].addMode===this.ABX?(p=this.read(o),o++,u=this.read(o),o++,y+="$"+(65535&u<<8|p).toString(16)+", X {ABX}"):this.instructions[_][$].addMode===this.ABY?(p=this.read(o),o++,u=this.read(o),o++,y+="$"+(65535&u<<8|p).toString(16)+", Y {ABY}"):this.instructions[_][$].addMode===this.IND?(p=this.read(o),o++,u=this.read(o),o++,y+="($"+(65535&u<<8|p).toString(16)+") {IND}"):this.instructions[_][$].addMode===this.REL&&(r=this.read(o),o++,y+="$"+(null==r?void 0:r.toString(16))+" [$"+(o-256+r).toString(16)+"] {REL}"),X[I.toString(16)]=y}return X}connectBus(e){this.Bus=e}read(e){return this.Bus.read(e)}write(e,t){this.Bus.write(e,t)}reset(){this.addr_abs=65532,this.stop=!1,this.pcl=this.read(this.addr_abs+0),this.pch=this.read(this.addr_abs+1),this.pc=this.pch<<8|this.pcl,this.a=0,this.x=0,this.y=0,this.stkp=255,this.status=0|l.U,this.status|=l.B,this.status|=l.I,this.addr_rel=0,this.addr_abs=0,this.fetched=0,this.cycles=7}irq(){0===this.GetFlag(l.I)&&(this.write(256+this.stkp,this.pc>>8&255),this.stkp--,this.write(256+this.stkp,255&this.pc),this.stkp--,this.SetFlag(l.B,0),this.SetFlag(l.U,1),this.SetFlag(l.I,1),this.write(256+this.stkp,this.status),this.stkp--,this.addr_abs=65534,this.pcl=this.read(this.addr_abs+0),this.pch=this.read(this.addr_abs+1),this.pc=this.pch<<8|this.pcl,this.cycles=7)}nmi(){this.write(256+this.stkp,this.pc>>8&255),this.stkp--,this.write(256+this.stkp,255&this.pc),this.stkp--,this.SetFlag(l.B,0),this.SetFlag(l.U,1),this.SetFlag(l.I,1),this.write(256+this.stkp,this.status),this.stkp--,this.addr_abs=65530,this.pcl=this.read(this.addr_abs+0),this.pch=this.read(this.addr_abs+1),this.pc=this.pch<<8|this.pcl,this.SetFlag(l.I,!1),this.cycles=8}clock(){if(0!=this.cycles){this.opcode=this.read(this.pc),this.SetFlag(l.U,!0),this.pc++,this.pch=this.opcode>>4,this.pcl=15&this.opcode,this.name=this.instructions[this.pch][this.pcl].name,this.cycles=this.instructions[this.pch][this.pcl].cicle,this.a&=255,this.x&=255,this.y&=255;const e=this.instructions[this.pch][this.pcl].addMode(),t=this.instructions[this.pch][this.pcl].exec();this.cycles+=e&t,this.SetFlag(l.U,!0)}else this.mlb=1;this.clock_count++,this.cycles--}cpu_status(){return{STATUS:{N:this.GetFlag(l.N)?1:0,V:this.GetFlag(l.V)?1:0,U:this.GetFlag(l.U)?1:0,B:this.GetFlag(l.B)?1:0,D:this.GetFlag(l.D)?1:0,I:this.GetFlag(l.I)?1:0,Z:this.GetFlag(l.Z)?1:0,C:this.GetFlag(l.C)?1:0},A:this.a.toString(16),X:this.x.toString(16),Y:this.y.toString(16),PC:(65535&this.pc).toString(16),STACK:(256+this.stkp).toString(16),CLOCKS:this.clock_count,CYCLES:this.cycles,CODE:this.opcode.toString(16),DATA:this.fetched.toString(16),NAME:this.name,FINISH:this.stop}}GetFlag(e){return(this.status&e)>0?1:0}SetFlag(e,t){t?this.status|=e:this.status&=~e}IMP(){const e=f.getInstance();return e.fetched=e.a,0}IMM(){const e=f.getInstance();return e.addr_abs=e.pc++,0}ZP0(){const e=f.getInstance();return e.addr_abs=e.read(e.pc),e.pc++,e.addr_abs&=255,0}ZPX(){const e=f.getInstance();return e.addr_abs=e.read(e.pc)+e.x,e.pc++,e.addr_abs&=255,0}ZPY(){const e=f.getInstance();return e.addr_abs=e.read(e.pc)+e.y,e.pc++,e.addr_abs&=255,0}REL(){const e=f.getInstance();return e.addr_rel=e.read(e.pc),e.pc++,128&e.addr_rel&&(e.addr_rel|=65280),0}ABS(){const e=f.getInstance(),t=e.read(e.pc);e.pc++;const o=e.read(e.pc);return e.pc++,e.addr_abs=o<<8|t,0}ABX(){const e=f.getInstance(),t=e.read(e.pc);e.pc++;const o=e.read(e.pc);return e.pc++,e.addr_abs=o<<8|t,e.addr_abs+=e.x,(65280&e.addr_abs)!=o<<8?1:0}ABY(){const e=f.getInstance(),t=e.read(e.pc);e.pc++;const o=e.read(e.pc);return e.pc++,e.addr_abs=o<<8|t,e.addr_abs+=e.y,(65280&e.addr_abs)!=o<<8?1:0}IND(){const e=f.getInstance(),t=e.read(e.pc);e.pc++;const o=e.read(e.pc);e.pc++;const r=o<<8|t;return e.addr_abs=255===t?e.read(65280&r)<<8|e.read(r+0):e.read(r+1)<<8|e.read(r+0),0}IZX(){const e=f.getInstance(),t=e.read(e.pc);e.pc++;const o=e.read(t+e.x&255),r=e.read(t+e.x+1&255);return e.addr_abs=r<<8|o,0}IZY(){const e=f.getInstance(),t=e.read(e.pc);e.pc++;const o=e.read(255&t),r=e.read(t+1&255);return e.addr_abs=r<<8|o,e.addr_abs+=e.y,(65280&e.addr_abs)!=r<<8?1:0}fetch(){return this.instructions[this.opcode>>4][15&this.opcode].addMode!==this.IMP&&(this.fetched=this.read(this.addr_abs)),this.fetched}ADC(){const e=f.getInstance();e.fetch();const t=e.a+e.fetched+e.GetFlag(l.C);return e.SetFlag(l.C,t>255),e.SetFlag(l.Z,0==(255&t)),e.SetFlag(l.V,~(e.a^this.fetched)&(this.a^t)&128),e.SetFlag(l.N,128&t),e.a=255&t,1}SBC(){const e=f.getInstance();e.fetch();const t=255^e.fetched,o=e.a+t+e.GetFlag(l.C);return e.SetFlag(l.C,65280&o),e.SetFlag(l.Z,0==(255&o)),e.SetFlag(l.V,(o^e.a)&(o^t)&128),e.SetFlag(l.N,128&o),e.a=255&o,1}AND(){const e=f.getInstance();return e.fetch(),e.a=e.a&e.fetched,e.SetFlag(l.Z,0===e.a),e.SetFlag(l.N,128&e.a),1}ASL(){const e=f.getInstance();e.mlb=0,e.fetch();const t=e.fetched<<1;return e.SetFlag(l.C,(65280&t)>0),e.SetFlag(l.Z,0==(255&t)),e.SetFlag(l.N,128&t),e.instructions[e.opcode>>4][15&e.opcode].addMode===e.IMP?e.a=255&t:e.write(e.addr_abs,255&t),0}BCC(){const e=f.getInstance();return 0===e.GetFlag(l.C)&&(e.cycles++,e.addr_abs=e.pc+e.addr_rel,(65280&e.addr_abs)!=(65280&e.pc)&&e.cycles++,e.pc=e.addr_abs),0}BCS(){const e=f.getInstance();return 1===e.GetFlag(l.C)&&(e.cycles++,e.addr_abs=e.pc+e.addr_rel,(65280&e.addr_abs)!=(65280&e.pc)&&e.cycles++,e.pc=e.addr_abs),0}BEQ(){const e=f.getInstance();return 1===e.GetFlag(l.Z)&&(e.cycles++,e.addr_abs=e.pc+e.addr_rel,(65280&e.addr_abs)!=(65280&e.pc)&&e.cycles++,e.pc=e.addr_abs),0}BIT(){const e=f.getInstance();return e.fetch(),e.SetFlag(l.Z,0==(e.a&e.fetched&255)),e.SetFlag(l.N,128&e.fetched),e.SetFlag(l.V,64&e.fetched),0}BMI(){const e=f.getInstance();return 1===e.GetFlag(l.N)&&(e.cycles++,e.addr_abs=e.pc+e.addr_rel,(65280&e.addr_abs)!=(65280&e.pc)&&e.cycles++,e.pc=e.addr_abs),0}BNE(){const e=f.getInstance();return 0===e.GetFlag(l.Z)&&(e.cycles++,e.addr_abs=e.pc+e.addr_rel,(65280&e.addr_abs)!=(65280&e.pc)&&e.cycles++,e.pc=65535&e.addr_abs),0}BPL(){const e=f.getInstance();return 0==e.GetFlag(l.N)&&(e.cycles++,e.addr_abs=e.pc+e.addr_rel,(65280&e.addr_abs)!=(65280&e.pc)&&e.cycles++,e.pc=e.addr_abs),0}BRK(){return f.getInstance().stop=!0,0}BVC(){const e=f.getInstance();return 0==e.GetFlag(l.V)&&(e.cycles++,e.addr_abs=e.pc+e.addr_rel,(65280&e.addr_abs)!=(65280&e.pc)&&e.cycles++,e.pc=e.addr_abs),0}BVS(){const e=f.getInstance();return 1==e.GetFlag(l.V)&&(e.cycles++,e.addr_abs=e.pc+e.addr_rel,(65280&e.addr_abs)!=(65280&e.pc)&&e.cycles++,e.pc=e.addr_abs),0}CLC(){return f.getInstance().SetFlag(l.C,!1),0}CLD(){return f.getInstance().SetFlag(l.D,!1),0}CLI(){return f.getInstance().SetFlag(l.I,!1),0}CLV(){return f.getInstance().SetFlag(l.V,!1),0}CMP(){const e=f.getInstance();e.fetch();const t=e.a-e.fetched;return e.SetFlag(l.C,e.a>=e.fetched),e.SetFlag(l.Z,0==(255&t)),e.SetFlag(l.N,128&t),1}CPX(){const e=f.getInstance();e.fetch();const t=e.x-e.fetched;return e.SetFlag(l.C,e.x>=e.fetched),e.SetFlag(l.Z,0==(255&t)),e.SetFlag(l.N,128&t),0}CPY(){const e=f.getInstance();e.fetch();const t=e.y-e.fetched;return e.SetFlag(l.C,e.y>=e.fetched),e.SetFlag(l.Z,0==(255&t)),e.SetFlag(l.N,128&t),0}DEC(){const e=f.getInstance();e.mlb=0,e.fetch();const t=e.fetched-1;return e.write(e.addr_abs,255&t),e.SetFlag(l.Z,0==(255&t)),e.SetFlag(l.N,128&t),0}DEX(){const e=f.getInstance();return e.x--,e.SetFlag(l.Z,0===e.x),e.SetFlag(l.N,128&e.x),0}DEY(){const e=f.getInstance();return e.y--,e.SetFlag(l.Z,0===e.y),e.SetFlag(l.N,128&e.y),0}EOR(){const e=f.getInstance();return e.fetch(),e.a=e.a^e.fetched,e.SetFlag(l.Z,0===e.a),e.SetFlag(l.N,128&e.a),1}INC(){const e=f.getInstance();e.mlb=0,e.fetch();const t=e.fetched+1;return e.write(e.addr_abs,255&t),e.SetFlag(l.Z,0==(255&t)),e.SetFlag(l.N,128&t),0}INX(){const e=f.getInstance();return e.x++,e.SetFlag(l.Z,0===e.x),e.SetFlag(l.N,128&e.x),0}INY(){const e=f.getInstance();return e.y++,e.SetFlag(l.Z,0===e.y),e.SetFlag(l.N,128&e.y),0}JMP(){const e=f.getInstance();return e.pc=e.addr_abs,0}JSR(){const e=f.getInstance();return e.pc--,e.write(256+e.stkp,e.pc>>8&255),e.stkp--,e.write(256+e.stkp,255&e.pc),e.stkp--,e.pc=e.addr_abs,0}LDA(){const e=f.getInstance();return e.fetch(),e.a=e.fetched,e.SetFlag(l.Z,0===e.a),e.SetFlag(l.N,128&e.a),1}LDX(){const e=f.getInstance();return e.fetch(),e.x=e.fetched,e.SetFlag(l.Z,0===e.x),e.SetFlag(l.N,128&e.x),1}LDY(){const e=f.getInstance();return e.fetch(),e.y=e.fetched,e.SetFlag(l.Z,0===e.y),e.SetFlag(l.N,128&e.y),1}LSR(){const e=f.getInstance();e.mlb=0,e.fetch(),e.SetFlag(l.C,1&e.fetched);const t=e.fetched>>1;return e.SetFlag(l.Z,0==(255&t)),e.SetFlag(l.N,128&t),e.instructions[e.opcode>>4][15&e.opcode].addMode===e.IMP?e.a=255&t:e.write(e.addr_abs,255&t),0}NOP(){switch(f.getInstance().opcode){case 28:case 60:case 92:case 124:case 220:case 252:return 1}return 0}ORA(){const e=f.getInstance();return e.fetch(),e.a=e.a|e.fetched,e.SetFlag(l.Z,0==e.a),e.SetFlag(l.N,128&e.a),1}PHA(){const e=f.getInstance();return e.write(256+e.stkp,e.a),e.stkp--,0}PHP(){const e=f.getInstance();return e.write(256+e.stkp,e.status|l.B|l.U),e.SetFlag(l.B,0),e.SetFlag(l.U,0),e.stkp--,0}PLA(){const e=f.getInstance();return e.stkp++,e.a=e.read(256+e.stkp),e.SetFlag(l.Z,0==e.a),e.SetFlag(l.N,128&e.a),0}PLP(){const e=f.getInstance();return e.stkp++,e.status=e.read(256+e.stkp),e.SetFlag(l.U,1),0}ROL(){const e=f.getInstance();e.mlb=0,e.fetch();const t=e.fetched<<1|e.GetFlag(l.C);return e.SetFlag(l.C,65280&t),e.SetFlag(l.Z,0==(255&t)),e.SetFlag(l.N,128&t),e.instructions[e.opcode>>4][15&e.opcode].addMode===e.IMP?e.a=255&t:e.write(e.addr_abs,255&t),0}ROR(){const e=f.getInstance();e.mlb=0,e.fetch();const t=e.GetFlag(l.C)<<7|e.fetched>>1;return e.SetFlag(l.C,1&e.fetched),e.SetFlag(l.Z,0==(255&t)),e.SetFlag(l.N,128&t),e.instructions[e.opcode>>4][15&e.opcode].addMode==e.IMP?e.a=255&t:e.write(e.addr_abs,255&t),0}RTI(){const e=f.getInstance();return e.stkp++,e.status=e.read(256+e.stkp),e.status&=~l.B,e.status&=~l.U,e.status&=~l.I,e.stkp++,e.pc=e.read(256+e.stkp),e.stkp++,e.pc|=e.read(256+e.stkp)<<8,0}RTS(){const e=f.getInstance();return e.stkp++,e.pc=e.read(256+e.stkp),e.stkp++,e.pc|=e.read(256+e.stkp)<<8,e.pc++,0}SEC(){return f.getInstance().SetFlag(l.C,!0),0}SED(){return f.getInstance().SetFlag(l.D,!0),0}SEI(){return f.getInstance().SetFlag(l.I,!0),0}STA(){const e=f.getInstance();return e.write(e.addr_abs,e.a),0}STX(){const e=f.getInstance();return e.write(e.addr_abs,e.x),0}STY(){const e=f.getInstance();return e.write(e.addr_abs,e.y),0}TAX(){const e=f.getInstance();return e.x=e.a,e.SetFlag(l.Z,0==e.x),e.SetFlag(l.N,128&e.x),0}TAY(){const e=f.getInstance();return e.y=e.a,e.SetFlag(l.Z,0==e.y),e.SetFlag(l.N,128&e.y),0}TSX(){const e=f.getInstance();return e.x=e.stkp,e.SetFlag(l.Z,0==e.x),e.SetFlag(l.N,128&e.x),0}TXA(){const e=f.getInstance();return e.a=e.x,e.SetFlag(l.Z,0==e.a),e.SetFlag(l.N,128&e.a),1}TXS(){const e=f.getInstance();return e.stkp=e.x,0}TYA(){const e=f.getInstance();return e.a=e.y,e.SetFlag(l.Z,0==e.a),e.SetFlag(l.N,128&e.a),0}XXX(){return 0}get isComplete(){return this.stop}SetDebugMode(e){this.debug=e}}var ts=R(6498),xe=R(6014),ss=R(6688);function os(i){const{subscriber:e,counter:t,period:o}=i;e.next(t),this.schedule({subscriber:e,counter:t+1,period:o},o)}let me=(()=>{class i{constructor(t){this.buffer=t,this.speed=5,this.cpu=f.getInstance(),this.cpu.connectBus(this.buffer),this.interval$=function is(i=0,e=xe.P){return(!function cs(i){return!(0,ss.k)(i)&&i-parseFloat(i)+1>=0}(i)||i<0)&&(i=0),(!e||"function"!=typeof e.schedule)&&(e=xe.P),new ts.y(t=>(t.add(e.schedule(os,i,{subscriber:t,counter:0,period:i})),t))}(this.speed)}get vendor(){return this.cpu.speed=(1e3/this.speed).toFixed(0),this.cpu.deviceInfo()}get status(){return this.cpu.cpu_status()}get clock(){return this.interval$}get sync(){return this.speed}run(){this.stop(),this.cpu.reset(),this.sub$=this.interval$.subscribe(()=>{this.cpu.clock(),this.buffer.load(),this.cpu.isComplete&&this.stop()})}stop(){this.sub$&&this.sub$.unsubscribe()}tick(){this.cpu.isComplete||(this.cpu.clock(),this.buffer.load())}restart(){this.cpu.reset()}irq(){this.cpu.irq()}nmi(){this.cpu.nmi()}}return i.\u0275fac=function(t){return new(t||i)(s.LFG(ce))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),as=(()=>{class i{constructor(t){this.device=t}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)(s.Y36(me))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-cpu"]],decls:101,vars:47,consts:[["slot","start"],["fill","solid","slot","end",3,"click"],[1,"container"],["size","12"],[3,"multiple"],["value","registers"],["slot","header","color","light"],["slot","content",1,"ion-padding"],["size","2.2"],["size","3"],["size","2.35"],["value","status"],["size","1"],["value","info"]],template:function(t,o){1&t&&(s.TgZ(0,"ion-buttons")(1,"ion-title",0)(2,"h1"),s._uU(3,"6502"),s.qZA()(),s.TgZ(4,"ion-button",1),s.NdJ("click",function(){return o.device.restart()}),s._uU(5,"REST"),s.qZA(),s.TgZ(6,"ion-button",1),s.NdJ("click",function(){return o.device.run()}),s._uU(7,"RUN"),s.qZA(),s.TgZ(8,"ion-button",1),s.NdJ("click",function(){return o.device.tick()}),s._uU(9,"TICK"),s.qZA(),s.TgZ(10,"ion-button",1),s.NdJ("click",function(){return o.device.stop()}),s._uU(11,"STOP"),s.qZA()(),s.TgZ(12,"div",2)(13,"ion-grid")(14,"ion-row")(15,"ion-col",3)(16,"ion-accordion-group",4)(17,"ion-accordion",5)(18,"ion-item",6)(19,"ion-label"),s._uU(20,"REGISTERS"),s.qZA()(),s.TgZ(21,"div",7)(22,"ion-row")(23,"ion-col",8),s._uU(24),s.ALo(25,"zeropad"),s.qZA(),s.TgZ(26,"ion-col",8),s._uU(27),s.ALo(28,"zeropad"),s.qZA(),s.TgZ(29,"ion-col",8),s._uU(30),s.ALo(31,"zeropad"),s.qZA(),s.TgZ(32,"ion-col",9),s._uU(33),s.ALo(34,"zeropad"),s.qZA(),s.TgZ(35,"ion-col",10),s._uU(36),s.ALo(37,"zeropad"),s.qZA()(),s.TgZ(38,"ion-row")(39,"ion-col",3),s._uU(40),s.ALo(41,"zeropad"),s.qZA(),s.TgZ(42,"ion-col",3),s._uU(43),s.ALo(44,"zeropad"),s.ALo(45,"zeropad"),s.qZA(),s.TgZ(46,"ion-col",3),s._uU(47),s.qZA()()()(),s.TgZ(48,"ion-accordion",11)(49,"ion-item",6)(50,"ion-label"),s._uU(51,"FLAGS"),s.qZA()(),s.TgZ(52,"div",7)(53,"ion-row")(54,"ion-col",12),s._uU(55,"N"),s.qZA(),s.TgZ(56,"ion-col",12),s._uU(57,"V"),s.qZA(),s.TgZ(58,"ion-col",12),s._uU(59,"U"),s.qZA(),s.TgZ(60,"ion-col",12),s._uU(61,"B"),s.qZA(),s.TgZ(62,"ion-col",12),s._uU(63,"D"),s.qZA(),s.TgZ(64,"ion-col",12),s._uU(65,"I"),s.qZA(),s.TgZ(66,"ion-col",12),s._uU(67,"Z"),s.qZA(),s.TgZ(68,"ion-col",12),s._uU(69,"C"),s.qZA()(),s.TgZ(70,"ion-row")(71,"ion-col",12),s._uU(72),s.qZA(),s.TgZ(73,"ion-col",12),s._uU(74),s.qZA(),s.TgZ(75,"ion-col",12),s._uU(76),s.qZA(),s.TgZ(77,"ion-col",12),s._uU(78),s.qZA(),s.TgZ(79,"ion-col",12),s._uU(80),s.qZA(),s.TgZ(81,"ion-col",12),s._uU(82),s.qZA(),s.TgZ(83,"ion-col",12),s._uU(84),s.qZA(),s.TgZ(85,"ion-col",12),s._uU(86),s.qZA()()()(),s.TgZ(87,"ion-accordion",13)(88,"ion-item",6)(89,"ion-label"),s._uU(90,"INFO"),s.qZA()(),s.TgZ(91,"div",7)(92,"ion-label")(93,"p"),s._uU(94),s.qZA(),s.TgZ(95,"p"),s._uU(96),s.qZA(),s.TgZ(97,"p"),s._uU(98),s.qZA(),s.TgZ(99,"p"),s._uU(100),s.qZA()()()()()()()()()),2&t&&(s.xp6(16),s.Q6J("multiple",!0),s.xp6(8),s.hij("A: ",s.xi3(25,23,o.device.status.A,2),""),s.xp6(3),s.hij("X: ",s.xi3(28,26,o.device.status.X,2),""),s.xp6(3),s.hij("Y: ",s.xi3(31,29,o.device.status.Y,2),""),s.xp6(3),s.hij("PC: ",s.xi3(34,32,o.device.status.PC,4),""),s.xp6(3),s.hij("SP: ",s.xi3(37,35,o.device.status.STACK,3),""),s.xp6(4),s.AsE(" OP: ",s.xi3(41,38,o.device.status.CODE,2)," [ ",o.device.status.NAME," ] "),s.xp6(3),s.AsE(" DATA: ",s.xi3(44,41,o.device.status.DATA,2)," ADDR: ",s.xi3(45,44,o.device.status.PC,4)," "),s.xp6(4),s.hij(" Cycles: ",o.device.status.CYCLES," "),s.xp6(25),s.Oqu(o.device.status.STATUS.N),s.xp6(2),s.Oqu(o.device.status.STATUS.V),s.xp6(2),s.Oqu(o.device.status.STATUS.U),s.xp6(2),s.Oqu(o.device.status.STATUS.B),s.xp6(2),s.Oqu(o.device.status.STATUS.D),s.xp6(2),s.Oqu(o.device.status.STATUS.I),s.xp6(2),s.Oqu(o.device.status.STATUS.Z),s.xp6(2),s.Oqu(o.device.status.STATUS.C),s.xp6(8),s.hij("Device: ",o.device.vendor.device,""),s.xp6(2),s.hij("Freq: ",o.device.vendor.clock,""),s.xp6(2),s.hij("Fabricant: ",o.device.vendor.fabricant,""),s.xp6(2),s.hij("Year: ",o.device.vendor.year,""))},dependencies:[b.We,b.eh,b.YG,b.Sm,b.wI,b.jY,b.Ie,b.Q$,b.Nd,b.wd,Re]}),i})(),Be=(()=>{class i{constructor(t,o){this.bus=t,this.cpu=o,this.IER=0,this.IFR=0,this._PORTA$=new se.X([0,0]),this._PORTB$=new se.X([0,0]),this.isRandom=!0,this.isKeboard=!1,this.isLcd=!1,this.IRQ=!0,this.NMI=!1,this.DDRA=0,this.DDRB=0}GetFlag(t){return(this.IER&t)>0?1:0}SetFlag(t,o){o?this.IER|=t:this.IER&=~t}irq(){1===this.GetFlag(T.H)&&(this.IRQ&&this.cpu.irq(),this.NMI&&this.cpu.nmi())}on(){this.SetFlag(T.H,1),this.sub$=this.cpu.clock.subscribe(()=>{this.IER=this.bus.read(24589),this.IFR=this.bus.read(24588);const t=this.bus.read(24576),o=this.bus.read(24577);if(this.DDRB=this.bus.read(24578),this.DDRA=this.bus.read(24579),this.isRandom){const r=Math.floor(255*Math.random()).toString();this.bus.write(24830,parseInt(r,16))}this._PORTB$.next([this.DDRB,t]),this._PORTA$.next([this.DDRA,o])})}off(){this.sub$&&this.sub$.unsubscribe()}get PORTA$(){return this._PORTA$.asObservable()}get PORTB$(){return this._PORTB$.asObservable()}get connectRandomDevice(){return this.isRandom}set connectRandomDevice(t){this.isRandom=t}get connectLcd(){return this.isLcd}set connectLcd(t){this.isLcd=t}get connectKeyboard(){return this.isKeboard}set connectKeyboard(t){this.isKeboard=t,this.isKeboard?(document.addEventListener("keydown",o=>{const r=o.key.charCodeAt(0);this.bus.write(24576,r)},!1),document.addEventListener("keypress",o=>{const r=o.key.charCodeAt(0);this.bus.write(24576,r)},!1),document.addEventListener("keyup",o=>{const r=o.key.charCodeAt(0);this.bus.write(24576,r),this.cpu.irq()},!1)):(document.removeEventListener("keydown",null,!1),document.removeEventListener("keypress",null,!1),document.removeEventListener("keyup",null,!1))}get connectToIRQ(){return this.IRQ}set connectToIRQ(t){this.IRQ=t,this.NMI=!1}get connectToNMI(){return this.NMI}set connectToNMI(t){this.NMI=t,this.IRQ=!1}}return i.\u0275fac=function(t){return new(t||i)(s.LFG(ce),s.LFG(me))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ns=(()=>{class i{constructor(){this.value=[0,0],this.label="LEDS",this.color="danger"}get BIT0(){return!!(this.value[0]&T.A&this.value[1]&T.A)}get BIT1(){return!!(this.value[0]&T.B&this.value[1]&T.B)}get BIT2(){return!!(this.value[0]&T.C&this.value[1]&T.C)}get BIT3(){return!!(this.value[0]&T.D&this.value[1]&T.D)}get BIT4(){return!!(this.value[0]&T.E&this.value[1]&T.E)}get BIT5(){return!!(this.value[0]&T.F&this.value[1]&T.F)}get BIT6(){return!!(this.value[0]&T.G&this.value[1]&T.G)}get BIT7(){return!!(this.value[0]&T.H&this.value[1]&T.H)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-leds"]],inputs:{value:["set","value"],label:"label",color:"color"},decls:13,vars:17,consts:[["slot","start"],["size","large","slot","end",2,"margin-left","5px",3,"color","name"]],template:function(t,o){1&t&&(s.TgZ(0,"ion-buttons")(1,"ion-note",0)(2,"p"),s._uU(3),s.qZA()()(),s.TgZ(4,"ion-buttons"),s._UZ(5,"ion-icon",1)(6,"ion-icon",1)(7,"ion-icon",1)(8,"ion-icon",1)(9,"ion-icon",1)(10,"ion-icon",1)(11,"ion-icon",1)(12,"ion-icon",1),s.qZA()),2&t&&(s.xp6(3),s.Oqu(o.label),s.xp6(2),s.MGl("name","radio-button-",o.BIT7?"on":"off","-sharp"),s.Q6J("color",o.color),s.xp6(1),s.MGl("name","radio-button-",o.BIT6?"on":"off","-sharp"),s.Q6J("color",o.color),s.xp6(1),s.MGl("name","radio-button-",o.BIT5?"on":"off","-sharp"),s.Q6J("color",o.color),s.xp6(1),s.MGl("name","radio-button-",o.BIT4?"on":"off","-sharp"),s.Q6J("color",o.color),s.xp6(1),s.MGl("name","radio-button-",o.BIT3?"on":"off","-sharp"),s.Q6J("color",o.color),s.xp6(1),s.MGl("name","radio-button-",o.BIT2?"on":"off","-sharp"),s.Q6J("color",o.color),s.xp6(1),s.MGl("name","radio-button-",o.BIT1?"on":"off","-sharp"),s.Q6J("color",o.color),s.xp6(1),s.MGl("name","radio-button-",o.BIT0?"on":"off","-sharp"),s.Q6J("color",o.color))},dependencies:[b.Sm,b.gu,b.uN]}),i})();var rs=R(3489);const Le={leading:!0,trailing:!1};class ps{constructor(e,t,o,r){this.duration=e,this.scheduler=t,this.leading=o,this.trailing=r}call(e,t){return t.subscribe(new us(e,this.duration,this.scheduler,this.leading,this.trailing))}}class us extends rs.L{constructor(e,t,o,r,p){super(e),this.duration=t,this.scheduler=o,this.leading=r,this.trailing=p,this._hasTrailingValue=!1,this._trailingValue=null}_next(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(fs,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)}}function fs(i){const{subscriber:e}=i;e.clearThrottle()}let gs=(()=>{class i{constructor(t,o){this.device=t,this.speed=10,this.isOn=!1,this.isCursor=!1,this.data=0,this.cmd=0,this.lo=3,this.hi=2,this.cursor=0,this.charCodes=[["?","?"," ","0","@","P","`","p","?","?","?","-","?","?","?","?"],["?","?","!","1","A","Q","a","q","?","?","?","-","?","?","?","?"],["?","?",'"',"2","B","R","b","r","?","?","?","-","?","?","?","?"],["?","?","#","3","C","S","c","s","?","?","?","-","?","?","?","?"],["?","?","$","4","D","T","d","t","?","?","?","-","?","?","?","?"],["?","?","%","5","E","U","e","u","?","?","?","-","?","?","?","?"],["?","?","&","6","F","V","f","v","?","?","?","-","?","?","?","?"],["?","?","'","7","G","W","g","w","?","?","?","-","?","?","?","?"],["?","?","(","8","H","X","h","x","?","?","?","-","?","?","?","?"],["?","?",")","9","I","Y","i","y","?","?","?","-","?","?","?","?"],["?","?","*",":","J","Z","j","z","?","?","?","-","?","?","?","?"],["?","?","+",";","K","[","k","(","?","?","?","-","?","?","?","?"],["?","?",",","<","L","","l","|","?","?","?","-","?","?","?","?"],["?","?","-","=","M","]","m",")","?","?","?","-","?","?","?","?"],["?","?",".",">","N","^","n",">","?","?","?","-","?","?","?","?"],["?","?","/","?","O","_","o","<","?","?","?","-","?","?","?","?"]],this.commands={1:"clear"},this.speed=o.sync}init(){this._chars=new Array(32),this.sub$1=this.device.PORTA$.pipe(function hs(i,e=xe.P,t=Le){return o=>o.lift(new ps(i,e,t.leading,t.trailing))}(this.speed)).subscribe(t=>{this.cmd=t[0]&t[1],0===this.GetCmdFlag(w.RW)&&1===this.GetCmdFlag(w.E)&&(0===this.GetCmdFlag(w.RS)?(1===this.GetDataFlag(w.A)&&0===this.GetDataFlag(w.B)&&0===this.GetDataFlag(w.C)&&0===this.GetDataFlag(w.D)&&this.clear(),1===this.GetDataFlag(w.B)&&0===this.GetDataFlag(w.C)&&0===this.GetDataFlag(w.D)&&this.returnHome(),1===this.GetDataFlag(w.C)&&0===this.GetDataFlag(w.D)&&this.moveCursor(!!this.GetDataFlag(w.B)),1===this.GetDataFlag(w.D)&&(this.blinkCursor(!!this.GetDataFlag(w.A)),this.showCursor(!!this.GetDataFlag(w.B)),this.displayOn(!!this.GetDataFlag(w.C)))):this.print())}),this.sub$2=this.device.PORTB$.subscribe(t=>{this.data=t[0]&t[1]})}destroy(){this.sub$1&&this.sub$1.unsubscribe(),this.sub$2&&this.sub$2.unsubscribe()}GetDataFlag(t){return(this.data&t)>0?1:0}GetCmdFlag(t){return(this.cmd&t)>0?1:0}clear(){this._chars.fill("")}returnHome(){this.cursor=0}moveCursor(t=!0){t?this.cursor+=1:this.cursor-=1,this.cursor>=16&&(this.cursor=0),this.cursor<0&&(this.cursor=16)}displayOn(t=!0){this.isOn=t,t||clearInterval(this.interval)}blinkCursor(t=!1){if(t&&this.isCursor){let o=!1;this.interval=setInterval(()=>{this._chars[this.cursor]=o?"_":"",o=!o},800)}else this.interval&&clearInterval(this.interval)}showCursor(t){this.isCursor=t,this._chars[this.cursor]=this.isCursor?"_":""}print(){if(!this.isOn)return;this.hi=this.data>>4&15,this.lo=15&this.data;const t=this.charCodes[this.lo][this.hi];t&&(this._chars[this.cursor]=t)}get chars(){return this._chars.join("")}set chars(t){this._chars.fill("").join(t)}get displayOnOff(){return this.isOn}set displayOnOff(t){this.isOn=t}}return i.\u0275fac=function(t){return new(t||i)(s.LFG(Be),s.LFG(me))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),xs=(()=>{class i{constructor(t){this.lcdCtrl=t}ngOnInit(){this.lcdCtrl.init()}ngOnDestroy(){this.lcdCtrl.destroy()}}return i.\u0275fac=function(t){return new(t||i)(s.Y36(gs))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-lcd"]],decls:6,vars:4,consts:[[2,"margin-left","1em"],["readonly","","name","display","id","display","cols","16","rows","2","maxlength","32",3,"ngModel","ngModelChange"],["lcd",""]],template:function(t,o){1&t&&(s.TgZ(0,"ion-card")(1,"ion-card-subtitle",0),s._uU(2," LCD hd44780 "),s.qZA(),s.TgZ(3,"ion-card-content")(4,"textarea",1,2),s.NdJ("ngModelChange",function(p){return o.lcdCtrl.chars=p}),s.qZA()()()),2&t&&(s.xp6(4),s.Gre("dottedText ",o.lcdCtrl.displayOnOff?"lcd-on":"lcd-off",""),s.Q6J("ngModel",o.lcdCtrl.chars))},dependencies:[E.Fj,E.JJ,E.nD,E.On,b.PM,b.FN,b.tO],styles:['ion-card[_ngcontent-%COMP%]{width:280px;max-width:280px}.lcd-on[_ngcontent-%COMP%]{background-color:var(--ion-color-success)}.lcd-off[_ngcontent-%COMP%]{background-color:#032103}#display[_ngcontent-%COMP%]{color:#000;border:none;resize:none;width:100%;font-size:x-large;font-family:revert;font-weight:700;padding:1em}.dottedText[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;top:0;width:100%;height:100%;background:radial-gradient(circle,transparent 50%,transparent 50%),radial-gradient(circle,transparent 20%,white 50%) 30px 30px;background-size:4px 4px}']}),i})();function ms(i,e){1&i&&s._UZ(0,"app-lcd")}function ys(i,e){if(1&i&&(s._UZ(0,"app-leds",8),s.ALo(1,"async")),2&i){const t=s.oxw();s.Q6J("set",s.lcZ(1,1,t.device.PORTA$))}}function bs(i,e){if(1&i&&(s._UZ(0,"app-leds",9),s.ALo(1,"async")),2&i){const t=s.oxw();s.Q6J("set",s.lcZ(1,1,t.device.PORTB$))}}let Cs=(()=>{class i{constructor(t){this.device=t}ngOnInit(){this.device.on()}}return i.\u0275fac=function(t){return new(t||i)(s.Y36(Be))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-via"]],decls:34,vars:9,consts:[[4,"ngIf"],["label","PORT A","color","success",3,"set",4,"ngIf"],["label","PORT B","color","warning",3,"set",4,"ngIf"],[2,"margin-top","2em",3,"multiple"],["value","settings"],["slot","header","color","light"],["slot","content",1,"ion-padding"],["slot","start",3,"ngModel","ngModelChange"],["label","PORT A","color","success",3,"set"],["label","PORT B","color","warning",3,"set"]],template:function(t,o){1&t&&(s.TgZ(0,"h2"),s._uU(1,"6522"),s.qZA(),s.YNc(2,ms,1,0,"app-lcd",0),s.YNc(3,ys,2,3,"app-leds",1),s.YNc(4,bs,2,3,"app-leds",2),s.TgZ(5,"ion-accordion-group",3)(6,"ion-accordion",4)(7,"ion-item",5)(8,"ion-label"),s._uU(9,"Settings"),s.qZA()(),s.TgZ(10,"div",6)(11,"ion-note")(12,"h5"),s._uU(13,"Devices"),s.qZA()(),s.TgZ(14,"ion-item")(15,"ion-checkbox",7),s.NdJ("ngModelChange",function(p){return o.device.connectRandomDevice=p}),s.qZA(),s.TgZ(16,"ion-label"),s._uU(17,"Attach Random Number Generator"),s.qZA()(),s.TgZ(18,"ion-item")(19,"ion-checkbox",7),s.NdJ("ngModelChange",function(p){return o.device.connectKeyboard=p}),s.qZA(),s.TgZ(20,"ion-label"),s._uU(21,"Attach Keyboard (uses 6502 IRQ And PORTB)"),s.qZA()(),s.TgZ(22,"ion-item")(23,"ion-checkbox",7),s.NdJ("ngModelChange",function(p){return o.device.connectLcd=p}),s.qZA(),s.TgZ(24,"ion-label"),s._uU(25,"Attach LCD (uses PORTB, PA7 PA6 PA5)"),s.qZA()(),s.TgZ(26,"ion-item")(27,"ion-checkbox",7),s.NdJ("ngModelChange",function(p){return o.device.connectToIRQ=p}),s.qZA(),s.TgZ(28,"ion-label"),s._uU(29,"Attach 6522 IRQ to 6502 IRQ PIN"),s.qZA()(),s.TgZ(30,"ion-item")(31,"ion-checkbox",7),s.NdJ("ngModelChange",function(p){return o.device.connectToNMI=p}),s.qZA(),s.TgZ(32,"ion-label"),s._uU(33,"Attach 6522 IRQ to 6502 NMI PIN"),s.qZA()()()()()),2&t&&(s.xp6(2),s.Q6J("ngIf",o.device.connectLcd),s.xp6(1),s.Q6J("ngIf",!o.device.connectLcd),s.xp6(1),s.Q6J("ngIf",!o.device.connectKeyboard),s.xp6(1),s.Q6J("multiple",!0),s.xp6(10),s.Q6J("ngModel",o.device.connectRandomDevice),s.xp6(4),s.Q6J("ngModel",o.device.connectKeyboard),s.xp6(4),s.Q6J("ngModel",o.device.connectLcd),s.xp6(4),s.Q6J("ngModel",o.device.connectToIRQ),s.xp6(4),s.Q6J("ngModel",o.device.connectToNMI))},dependencies:[z.O5,E.JJ,E.On,b.We,b.eh,b.nz,b.Ie,b.Q$,b.uN,b.w,ns,xs,z.Ov]}),i})();function Ms(i,e){if(1&i){const t=s.EpF();s.TgZ(0,"ion-content")(1,"ion-list")(2,"ion-item",24),s._uU(3,"6502 in detail"),s.qZA(),s.TgZ(4,"ion-item",25),s._uU(5,"6502 from scratch"),s.qZA(),s.TgZ(6,"ion-item",26),s._uU(7,"License"),s.qZA(),s.TgZ(8,"ion-item",27),s.NdJ("click",function(){s.CHM(t);const r=s.oxw();return s.KtG(r.about())}),s._uU(9,"About?"),s.qZA()()()}2&i&&(s.xp6(2),s.Q6J("button",!0)("detail",!0),s.xp6(2),s.Q6J("button",!0)("detail",!0),s.xp6(2),s.Q6J("button",!0)("detail",!0),s.xp6(2),s.Q6J("button",!0)("detail",!1))}const As=function(){return["code"]},_s=function(){return["via","cpu"]},Is=[{path:"",component:(()=>{class i{constructor(t){this.alertController=t,this.pageTitle="Welcome"}about(){return(0,pe.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({mode:"ios",animated:!0,header:"About?",subHeader:"Author: Berlys Santos Cruz\t\n",message:"\n        Version: Beta v0.1.0\n\n      ",buttons:[{text:"Okay",role:"cancel"}]})).present()})}}return i.\u0275fac=function(t){return new(t||i)(s.Y36(b.Br))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-home"]],decls:60,vars:11,consts:[[3,"translucent"],["slot","start"],["src","assets/icon/6502.png","alt","icon"],["slot","end"],["id","popover-button"],["name","ellipsis-vertical"],["mode","ios","trigger","popover-button",3,"dismissOnSelect"],[3,"fullscreen"],["collapse","condense"],["size","large"],[2,"height","90vh"],["size","12","size-md","6","size-lg","7",2,"border-left",".4px solid grey"],[3,"multiple","value"],["value","code"],["slot","header","color","light"],["slot","content",1,"ion-padding",2,"height","70vh"],["value","memory"],["slot","content",1,"ion-padding","sm-width"],["value","memory-map"],["value","schematic"],["size","12","size-md","6","size-lg","5",2,"border-left",".4px solid grey"],["value","via"],["slot","content",1,"ion-padding"],["value","cpu"],["href","https://www.middle-engine.com/blog/posts/2020/06/23/programming-the-nes-the-6502-in-detail","target","_blank",3,"button","detail"],["href","https://www.youtube.com/watch?v=LnzuMJLZRdU&list=PLowKtXNTBypFbtuVMUVXNR0z1mu7dp7eH","target","_blank",3,"button","detail"],["href","https://opensource.org/licenses/MIT","target","_blank",3,"button","detail"],[3,"button","detail","click"]],template:function(t,o){1&t&&(s.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-thumbnail"),s._UZ(4,"img",2),s.qZA()(),s.TgZ(5,"ion-title"),s._uU(6),s.qZA(),s.TgZ(7,"ion-buttons",3)(8,"ion-button",4),s._uU(9," Options "),s._UZ(10,"ion-icon",5),s.qZA(),s.TgZ(11,"ion-popover",6),s.YNc(12,Ms,10,8,"ng-template"),s.qZA()()()(),s.TgZ(13,"ion-content",7)(14,"ion-header",8)(15,"ion-toolbar")(16,"ion-title",9),s._uU(17),s.qZA()()(),s.TgZ(18,"ion-grid")(19,"ion-row",10)(20,"ion-col",11)(21,"ion-accordion-group",12)(22,"ion-accordion",13)(23,"ion-item",14)(24,"ion-label"),s._uU(25,"ASSEMBLER"),s.qZA()(),s.TgZ(26,"div",15),s._UZ(27,"app-code"),s.qZA()(),s.TgZ(28,"ion-accordion",16)(29,"ion-item",14)(30,"ion-label"),s._uU(31,"MEMORY"),s.qZA()(),s.TgZ(32,"div",17),s._UZ(33,"app-mem-buffer"),s.qZA()(),s.TgZ(34,"ion-accordion",18)(35,"ion-item",14)(36,"ion-label"),s._uU(37,"MEMORY LAYOUT"),s.qZA()(),s.TgZ(38,"div",17),s._UZ(39,"app-mem-map"),s.qZA()(),s.TgZ(40,"ion-accordion",19)(41,"ion-item",14)(42,"ion-label"),s._uU(43,"SCHEMATIC"),s.qZA()(),s.TgZ(44,"div",17),s._UZ(45,"app-schematic"),s.qZA()()()(),s.TgZ(46,"ion-col",20)(47,"ion-accordion-group",12)(48,"ion-accordion",21)(49,"ion-item",14)(50,"ion-label"),s._uU(51,"Versatile Interface Adapter (VIA)"),s.qZA()(),s.TgZ(52,"div",22),s._UZ(53,"app-via"),s.qZA()(),s.TgZ(54,"ion-accordion",23)(55,"ion-item",14)(56,"ion-label"),s._uU(57,"CPU"),s.qZA()(),s.TgZ(58,"div",22),s._UZ(59,"app-cpu"),s.qZA()()()()()()()),2&t&&(s.Q6J("translucent",!0),s.xp6(6),s.hij(" ",o.pageTitle," "),s.xp6(5),s.Q6J("dismissOnSelect",!0),s.xp6(2),s.Q6J("fullscreen",!0),s.xp6(4),s.Oqu(o.pageTitle),s.xp6(4),s.Q6J("multiple",!0)("value",s.DdM(9,As)),s.xp6(26),s.Q6J("multiple",!0)("value",s.DdM(10,_s)))},dependencies:[b.We,b.eh,b.YG,b.Sm,b.wI,b.W2,b.jY,b.Gu,b.gu,b.Ie,b.Q$,b.q_,b.Nd,b.Bs,b.wd,b.sr,b.d8,Vt,Kt,Wt,es,as,Cs],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}@media screen and (max-width: 700px){.sm-width[_ngcontent-%COMP%]{width:90vw;overflow:scroll}}"]}),i})()}];let Fs=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[ve.Bz.forChild(Is),ve.Bz]}),i})(),vs=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[z.ez]}),i})(),Ss=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[z.ez,E.u5,b.Pc,vs,Fs]}),i})()}}]);